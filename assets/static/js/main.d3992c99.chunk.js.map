{"version":3,"sources":["../../fabric-workspace/types/actor.js","../../fabric-workspace/constants.js","../../fabric-workspace/types/hash256.js","../../web/types/remote.js","settings/state.js","../../fabric-workspace/functions/_sortKeys.js","../../fabric-workspace/types/message.js","../../fabric-workspace/types/label.js","../../fabric-workspace/functions/padDigits.js","serviceWorker.js","types/component.js","components/FabricBridge.js","components/FabricTransactionList.js","components/FaucetDripForm.js","Home.js","App.js","index.js"],"names":["crypto","require","EventEmitter","Hash256","_sortKeys","Actor","actor","log","signature","value","_readObject","_state","status","content","buffer","Buffer","from","this","preimage","digest","input","toObject","string","JSON","stringify","state","push","id","emit","params","serialize","format","toString","commit","json","exception","type","Error","Object","assign","encoding","result","length","console","parse","E","error","trace","count","randomBytes","module","exports","MAGIC_BYTES","GENERIC_MESSAGE_TYPE","parseInt","createHash","update","slice","LOG_MESSAGE_TYPE","GENERIC_LIST_TYPE","PEER_PORT","MAX_PEERS","PRECISION","BITCOIN_GENESIS","BITCOIN_GENESIS_ROOT","FABRIC_KEY_DERIVATION_PATH","HEADER_SIZE","LARGE_COLLECTION_SIZE","BLOCK_CANDIDATE","CHAT_MESSAGE","ZERO_LENGTH_PLAINTEXT","LIGHTNING_TEST_HEADER","LIGHTNING_PROTOCOL_H_INIT","LIGHTNING_PROTOCOL_PROLOGUE","LIGHTNING_BMM_HEADER","LIGHTNING_SIDECHAIN_NUM","LIGHTNING_SIDEBLOCK_HASH","LIGHTNING_PARENT_SIDEBLOCK_HASH","MAX_FRAME_SIZE","MAX_MEMORY_ALLOC","MAX_STACK_HEIGHT","MAX_MESSAGE_SIZE","MAX_CHANNEL_VALUE","MAX_CHAT_MESSAGE_LENGTH","MAX_TX_PER_BLOCK","MACHINE_MAX_MEMORY","OP_CYCLE","OP_DONE","OP_0","OP_36","OP_CHECKSIG","OP_DUP","OP_EQUAL","OP_SHA256","OP_HASH160","OP_PUSHDATA1","OP_RETURN","OP_EQUALVERIFY","OP_SEPARATOR","P2P_GENERIC","P2P_IDENT_REQUEST","P2P_IDENT_RESPONSE","P2P_CHAIN_SYNC_REQUEST","P2P_ROOT","P2P_PING","P2P_PONG","P2P_START_CHAIN","P2P_INSTRUCTION","P2P_BASE_MESSAGE","P2P_STATE_ROOT","P2P_STATE_COMMITTMENT","P2P_STATE_CHANGE","P2P_STATE_REQUEST","P2P_TRANSACTION","P2P_CALL","P2P_SESSION_ACK","PEER_CANDIDATE","DOCUMENT_PUBLISH_TYPE","DOCUMENT_REQUEST_TYPE","SESSION_START","VERSION_NUMBER","settings","hash","reverse","querystring","fetch","parser","WebSocket","Message","CONTENT_TYPE","Remote","config","authority","entropy","Math","random","secure","host","port","socket","endpoint","messages","meta","Uint8Array","isArrayBufferSupported","arrayBufferToBufferAsArgument","arrayBufferToBufferCycle","ab","byteLength","view","i","message","connect","packet","data","fromRaw","name","call","fromVector","toRaw","send","binaryType","addEventListener","_handleSocketClose","bind","_handleSocketOpen","_handleSocketMessage","_handleSocketError","_OPTIONS","options","results","definition","description","components","list","routes","attributes","names","path","parts","self","split","protocol","url","response","opts","method","headers","username","password","join","mode","body","ok","formatter","get","verbosity","text","warn","created","Date","toISOString","msg","raw","key","request","obj","playnet","seed","balances","asset","symbol","confirmed","chains","tip","genesis","channels","keys","identity","nodes","orders","peers","alias","transactions","sort","reduce","struct","Label","padDigits","TYPE_ETHEREUM_BLOCK","_id","TYPE_ETHEREUM_BLOCK_NUMBER","magic","alloc","version","size","parent","write","defineProperty","enumerable","asRaw","concat","header","map","byte","entries","types","ret","entry","charsnt","allocate","_setBuff","vector","prototype","set","code","padded","number","digits","Array","max","String","Boolean","window","location","hostname","match","FabricComponent","props","import","merge","integrity","ec","EC","ref","React","createRef","dochash","start","setState","Card","Content","children","constructor","Component","FabricBridge","defaults","remote","_syncState","executeMethod","ping","fluid","Button","Group","floated","onClick","Icon","Header","as","Feed","Event","style","fontSize","fontFamily","color","extra","a","on","_handleRemoteReady","_handleRemoteMessage","_handleRemoteError","TransactionList","className","Table","celled","Row","HeaderCell","Body","transaction","index","Cell","inputs","outputs","FaucetDripForm","network","requests","fields","address","secret","form","bitcoin","mainnet","regtest","testnet","e","target","networks","isValid","validateAddress","errors","email","submittedName","submittedEmail","sync","Form","onSubmit","onChange","handleChange","Field","Input","action","placeholder","onKeyUp","_handleAddressChange","attached","icon","labelPosition","toOutputScript","Home","bridge","current","then","Visibility","onBottomPassed","_handleMastheadBottomPassed","Segment","Container","marginTop","_handleBridgeChange","event","calculations","App","snapshots","exact","element","FabricTransactionList","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d3992c99.chunk.js","sourcesContent":["'use strict';\n\n// Dependencies\nconst crypto = require('crypto');\nconst { EventEmitter } = require('events');\nconst monitor = require('fast-json-patch');\n\n// Fabric Types\nconst Hash256 = require('./hash256');\n\n// Fabric Functions\nconst _sortKeys = require('../functions/_sortKeys');\n\n/**\n * Generic Fabric Actor.\n * @access protected\n * @emits message Fabric {@link Message} objects.\n * @property {String} id Unique identifier for this Actor (id === SHA256(preimage)).\n * @property {String} preimage Input hash for the `id` property (preimage === SHA256(ActorState)).\n */\nclass Actor extends EventEmitter {\n  /**\n   * Creates an {@link Actor}, which emits messages for other\n   * Actors to subscribe to.  You can supply certain parameters\n   * for the actor, including key material [!!!] — be mindful of\n   * what you share with others!\n   * @param {Object} [actor] Object to use as the actor.\n   * @param {String} [actor.seed] BIP24 Mnemonic to use as a seed phrase.\n   * @param {Buffer} [actor.public] Public key.\n   * @param {Buffer} [actor.private] Private key.\n   * @returns {Actor} Instance of the Actor.  Call {@link Actor#sign} to emit a {@link Signature}.\n   */\n  constructor (actor = {}) {\n    super(actor);\n\n    this.log = [];\n    this.signature = null;\n    this.value = this._readObject(actor); // TODO: use Buffer?\n\n    // Internal State\n    this._state = {\n      '@type': 'Actor',\n      '@data': this.value,\n      status: 'PAUSED',\n      content: this.value || {}\n    };\n\n    // Chainable\n    return this;\n  }\n\n  static fromAny (input = {}) {\n    let state = null;\n\n    if (typeof input === 'string') {\n      state = { content: input };\n    } else if (input instanceof Buffer) {\n      state = { content: input.toString('hex') };\n    } else {\n      state = Object.assign({}, input);\n    }\n\n    return new Actor(state);\n  }\n\n  static fromJSON (input) {\n    let result = null;\n\n    if (typeof input === 'string' && input.length) {\n      console.log('trying to parse as JSON:', input);\n      try {\n        result = JSON.parse(input);\n      } catch (E) {\n        console.error('Failure in fromJSON:', E);\n      }\n    } else {\n      console.trace('Invalid input:', typeof input);\n    }\n\n    return result;\n  }\n\n  static randomBytes (count = 32) {\n    return crypto.randomBytes(count);\n  }\n\n  get id () {\n    const buffer = Buffer.from(this.preimage, 'hex');\n    return Hash256.digest(buffer);\n  }\n\n  get preimage () {\n    const input = {\n      '@type': 'FabricActorState',\n      '@data': this.toObject()\n    };\n\n    const string = JSON.stringify(input, null, '  ');\n    const buffer = Buffer.from(string, 'utf8');\n\n    return Hash256.digest(buffer);\n  }\n\n  get state () {\n    return this._state.content;\n  }\n\n  get type () {\n    return this._state['@type'];\n  }\n\n  /**\n   * Resolve the current state to a commitment.\n   * @emits Actor Current malleable state.\n   * @returns {String} 32-byte ID\n   */\n  commit () {\n    const state = new Actor(this._state.content);\n    this.log.push(...state.id);\n    this.emit('commit', state);\n    return state.id;\n  }\n\n  debug (...params) {\n    this.emit('debug', params);\n  }\n\n  /**\n   * Casts the Actor to a normalized Buffer.\n   * @returns {Buffer}\n   */\n  toBuffer () {\n    return Buffer.from(this.serialize(), 'utf8');\n  }\n\n  /**\n   * Returns the Actor's current state as an {@link Object}.\n   * @returns {Object}\n   */\n  toObject () {\n    return _sortKeys(this.state);\n  }\n\n  toString (format = 'json') {\n    switch (format) {\n      case 'hex':\n        return Buffer.from(this.serialize(), 'utf8').toString('hex');\n      case 'json':\n      default:\n        return this.serialize();\n    }\n  }\n\n  pause () {\n    this.status = 'PAUSING';\n    this.commit();\n    return this;\n  }\n\n  /**\n   * Serialize the Actor's current state into a JSON-formatted string.\n   * @returns {String}\n   */\n  serialize () {\n    let json = null;\n\n    try {\n      json = JSON.stringify(this.toObject(), null, '  ');\n    } catch (exception) {\n      json = JSON.stringify({\n        type: 'Error',\n        content: `Exception serializing: ${exception}`\n      }, null, '  ');\n    }\n\n    return json;\n  }\n\n  /**\n   * Signs the Actor.\n   * @returns {Actor}\n   */\n  sign () {\n    throw new Error('Unimplemented on this branch.  Use @fabric/core/types/signer instead.');\n    /* this.signature = this.key._sign(this.toBuffer());\n    this.emit('signature', this.signature);\n    return this; */\n  }\n\n  /**\n   * Toggles `status` property to unpaused.\n   * @\n   * @returns {Actor}\n   */\n  unpause () {\n    this.status = 'UNPAUSING';\n    this.commit();\n    this.status = 'UNPAUSED';\n    return this;\n  }\n\n  /**\n   * Incurs 1 SYSCALL\n   * @access private\n   * @returns {Object}\n   */\n  _getState () {\n    return this.state;\n  }\n\n  _readObject (input = {}) {\n    let state = {};\n\n    if (typeof input === 'string') {\n      state = Object.assign(state, {\n        type: 'String',\n        content: input\n      });\n    } else if (input instanceof Buffer) {\n      state = Object.assign(state, {\n        type: 'Buffer',\n        content: input.toString('hex'),\n        encoding: 'hex'\n      });\n    } else {\n      state = Object.assign(state, input);\n    }\n\n    return state;\n  }\n}\n\nmodule.exports = Actor;\n","/*\n  Fabric Core Constants.\n  ---\n  Author: Fabric Labs\n  Copyright: All Rights Reserved.\n */\n'use strict';\n\n// Dependencies\nconst crypto = require('crypto');\n\n// Networking and Environment\nconst PEER_PORT = 9999;\nconst MAX_PEERS = 32;\nconst PRECISION = 100;\n\n// Fabric Core\nconst BITCOIN_GENESIS = '000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f';\nconst BITCOIN_GENESIS_ROOT = '4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b';\nconst FABRIC_KEY_DERIVATION_PATH = \"m/44'/0'/0'/0/0\";\n\n// Message Constants\nconst MAGIC_BYTES = 0xC0D3F33D;\nconst VERSION_NUMBER = 0x00; // 0 for development, pre-alpha, 1 for production\nconst HEADER_SIZE = 48; // 32 + 16 bytes\nconst LARGE_COLLECTION_SIZE = 10; // TODO: test with 1,000,000\nconst MAX_MESSAGE_SIZE = 4096 - HEADER_SIZE;\n\n// Stacks and Frames\nconst MAX_STACK_HEIGHT = 32; // max height of stack (number of elements)\nconst MAX_FRAME_SIZE = 32; // max size of a stack frame in bytes\nconst MAX_MEMORY_ALLOC = MAX_STACK_HEIGHT * MAX_FRAME_SIZE;\nconst MAX_TX_PER_BLOCK = 100;\nconst MAX_CHANNEL_VALUE = 100000000;\n\n// Machine Constraints\nconst MACHINE_MAX_MEMORY = MAX_MEMORY_ALLOC * MAX_MESSAGE_SIZE;\nconst MAX_CHAT_MESSAGE_LENGTH = 2048;\n\n// FABRIC ONLY\nconst GENERIC_MESSAGE_TYPE = MAGIC_BYTES + parseInt(crypto.createHash('sha256').update('@types/GenericMessage').digest('hex').slice(0, 4), 16);\nconst LOG_MESSAGE_TYPE = MAGIC_BYTES + parseInt(crypto.createHash('sha256').update('@types/GenericLogMessage').digest('hex').slice(0, 4), 16);\nconst GENERIC_LIST_TYPE = MAGIC_BYTES + parseInt(crypto.createHash('sha256').update('@types/GenericList').digest('hex').slice(0, 4), 16);\nconst DOCUMENT_PUBLISH_TYPE = 998;\nconst DOCUMENT_REQUEST_TYPE = 999;\n\n// Opcodes\nconst OP_CYCLE = '00';\nconst OP_DONE = 'ff';\n\n// Bitcoin\nconst OP_0 = '00';\nconst OP_36 = '24';\nconst OP_CHECKSIG = 'ac';\nconst OP_DUP = '76';\nconst OP_EQUAL = '87';\nconst OP_SHA256 = 'a8';\nconst OP_HASH160 = 'a9';\nconst OP_PUSHDATA1 = '4c';\nconst OP_RETURN = '6a';\nconst OP_EQUALVERIFY = '88';\nconst OP_SEPARATOR = 'ab';\n\nconst P2P_GENERIC = 0x80; // 128 in decimal\nconst P2P_IDENT_REQUEST = 0x01; // 1, or the identity\nconst P2P_IDENT_RESPONSE = 0x11;\nconst P2P_ROOT = 0x00000000;\nconst P2P_PING = 0x00000012; // same ID as Lightning (18)\nconst P2P_PONG = 0x00000013; // same ID as Lightning (19)\nconst P2P_INSTRUCTION = 0x00000020; // TODO: select w/ no overlap\nconst P2P_START_CHAIN = 0x00000021;\nconst P2P_STATE_REQUEST = 0x00000029; // TODO: select w/ no overlap\nconst P2P_STATE_ROOT = 0x00000030; // TODO: select w/ no overlap\nconst P2P_BASE_MESSAGE = 0x00000031; // TODO: select w/ no overlap\nconst P2P_STATE_COMMITTMENT = 0x00000032; // TODO: select w/ no overlap\nconst P2P_STATE_CHANGE = 0x00000033; // TODO: select w/ no overlap\nconst P2P_TRANSACTION = 0x00000039; // TODO: select w/ no overlap\nconst P2P_CALL = 0x00000042;\nconst P2P_CHAIN_SYNC_REQUEST = 0x55;\nconst P2P_SESSION_ACK = 0x4200;\n\nconst PEER_CANDIDATE = 0x09;\n// TODO: should be 0x02 for Bitcoin P2P\nconst BLOCK_CANDIDATE = 0x03;\n\nconst SESSION_START = 0x02;\nconst CHAT_MESSAGE = 0x67;\n\n// Lightning\nconst LIGHTNING_TEST_HEADER = 'D0520C6E';\nconst LIGHTNING_PROTOCOL_H_INIT = 'Noise_XK_secp256k1_ChaChaPoly_SHA256';\nconst LIGHTNING_PROTOCOL_PROLOGUE = 'lightning';\n\n// Lightning BMM\nconst LIGHTNING_BMM_HEADER = 'D0520C6E';\nconst LIGHTNING_SIDECHAIN_NUM = 0xFF; // 1-byte - sidechain number\n\nconst LIGHTNING_SIDEBLOCK_HASH = 0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000; // 32-bytes\nconst LIGHTNING_PARENT_SIDEBLOCK_HASH = 0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001; // 32-bytes\n\nconst ZERO_LENGTH_PLAINTEXT = '';\n\nmodule.exports = {\n  PEER_PORT,\n  MAX_PEERS,\n  PRECISION,\n  BITCOIN_GENESIS,\n  BITCOIN_GENESIS_ROOT,\n  FABRIC_KEY_DERIVATION_PATH,\n  HEADER_SIZE,\n  GENERIC_MESSAGE_TYPE,\n  LOG_MESSAGE_TYPE,\n  GENERIC_LIST_TYPE,\n  LARGE_COLLECTION_SIZE,\n  BLOCK_CANDIDATE,\n  CHAT_MESSAGE,\n  ZERO_LENGTH_PLAINTEXT,\n  LIGHTNING_TEST_HEADER,\n  LIGHTNING_PROTOCOL_H_INIT,\n  LIGHTNING_PROTOCOL_PROLOGUE,\n  LIGHTNING_BMM_HEADER,\n  LIGHTNING_SIDECHAIN_NUM,\n  LIGHTNING_SIDEBLOCK_HASH,\n  LIGHTNING_PARENT_SIDEBLOCK_HASH,\n  MAGIC_BYTES,\n  MAX_FRAME_SIZE,\n  MAX_MEMORY_ALLOC,\n  MAX_MESSAGE_SIZE,\n  MAX_STACK_HEIGHT,\n  MAX_CHANNEL_VALUE,\n  MAX_CHAT_MESSAGE_LENGTH,\n  MAX_TX_PER_BLOCK,\n  MACHINE_MAX_MEMORY,\n  OP_CYCLE,\n  OP_DONE,\n  OP_0,\n  OP_36,\n  OP_CHECKSIG,\n  OP_DUP,\n  OP_EQUAL,\n  OP_SHA256,\n  OP_HASH160,\n  OP_PUSHDATA1,\n  OP_RETURN,\n  OP_EQUALVERIFY,\n  OP_SEPARATOR,\n  P2P_GENERIC,\n  P2P_IDENT_REQUEST,\n  P2P_IDENT_RESPONSE,\n  P2P_CHAIN_SYNC_REQUEST,\n  P2P_ROOT,\n  P2P_PING,\n  P2P_PONG,\n  P2P_START_CHAIN,\n  P2P_INSTRUCTION,\n  P2P_BASE_MESSAGE,\n  P2P_STATE_ROOT,\n  P2P_STATE_COMMITTMENT,\n  P2P_STATE_CHANGE,\n  P2P_STATE_REQUEST,\n  P2P_TRANSACTION,\n  P2P_CALL,\n  P2P_SESSION_ACK,\n  PEER_CANDIDATE,\n  DOCUMENT_PUBLISH_TYPE,\n  DOCUMENT_REQUEST_TYPE,\n  SESSION_START,\n  VERSION_NUMBER\n};\n","'use strict';\n\nconst crypto = require('crypto');\n\n/**\n * Simple interaction with 256-bit spaces.\n */\nclass Hash256 {\n  /**\n   * Create an instance of a `Hash256` object by calling `new Hash256()`,\n   * where `settings` can be provided to supply a particular input object.\n   * \n   * If the `settings` is not a string, `input` must be provided.\n   * @param {Object} settings \n   * @param {String} settings.input Input string to map as 256-bit hash.\n   */\n  constructor (settings = {}) {\n    if (typeof settings === 'string') settings = { input: settings };\n    if (!settings.input) settings.input = crypto.randomBytes(32).toString('hex');\n\n    this.settings = Object.assign({\n      hash: Hash256.digest(settings.input)\n    }, settings);\n  }\n\n  /**\n   * Produce a SHA256 digest of some input data.\n   * @param {String|Buffer} input Content to digest.\n   * @returns {String} `SHA256(input)` as a hexadecimal string.\n   */\n  static digest (input) {\n    if (typeof input !== 'string' && !(input instanceof Buffer)) {\n      throw new Error(`Input to process must be of type \"String\" or \"Buffer\" to digest.`);\n    }\n\n    // consume and output as string\n    return crypto.createHash('sha256').update(input).digest('hex');\n  }\n\n  // TODO: document `hash256.value`\n  get value () {\n    return Hash256.digest(this.settings.input);\n  }\n\n  /**\n   * Reverses the bytes of the digest.\n   */\n  static reverse (input = '') {\n    return Buffer.from(input, 'hex').reverse().toString('hex');\n  }\n\n  reverse (input = this.value) {\n    return Hash256.reverse(input);\n  }\n}\n\nmodule.exports = Hash256;","'use strict';\n\nconst {\n  P2P_CALL\n} = require('@fabric/core/constants');\n\n// Internal Dependencies\nconst http = require('http');\nconst https = require('https');\nconst querystring = require('querystring');\n\n// External Dependencies\nconst fetch = require('node-fetch');\nconst parser = require('content-type');\nconst ws = require('ws').WebSocket;\n\n// Internal Types\nconst Actor = require('@fabric/core/types/actor');\nconst Message = require('@fabric/core/types/message');\nconst CONTENT_TYPE = 'application/json';\n\n/**\n * Interact with a remote {@link Resource}.  This is currently the only\n * HTTP-related code that should remain in @fabric/core — all else must\n * be moved to @fabric/http before final release!\n * @type {Remote}\n * @property {Object} config\n * @property {Boolean} secure\n */\nclass Remote extends Actor {\n  /**\n   * An in-memory representation of a node in our network.\n   * @param       {Object} target - Target object.\n   * @param       {String} target.host - Named host, e.g. \"localhost\".\n   * @param       {String} target.secure - Require TLS session.\n   * @constructor\n   */\n  constructor (config = {}) {\n    super(config);\n\n    this.settings = Object.assign({\n      authority: 'localhost',\n      entropy: Math.random(),\n      secure: true,\n      host: 'hub.fabric.pub',\n      port: 443\n    }, config);\n\n    this.host = this.settings.host || this.settings.authority;\n    this.secure = this.settings.secure;\n    this.socket = null;\n\n    this.endpoint = `${(this.secure) ? 'wss' : 'ws'}:${this.host}:${this.port}/`;\n\n    this._state = {\n      status: 'PAUSED',\n      messages: [],\n      meta: {\n        messages: {\n          count: 0\n        }\n      }\n    };\n\n    return this;\n  }\n\n  get port () {\n    return this.settings.port;\n  }\n\n  get isArrayBufferSupported () {\n    return (new Buffer(new Uint8Array([1]).buffer)[0] === 1);\n  }\n\n  get arrayBufferToBuffer () {\n    return this.isArrayBufferSupported ? this.arrayBufferToBufferAsArgument : this.arrayBufferToBufferCycle;\n  }\n    \n  arrayBufferToBufferAsArgument (ab) {\n    return new Buffer(ab);\n  }\n\n  arrayBufferToBufferCycle (ab) {\n    var buffer = new Buffer(ab.byteLength);\n    var view = new Uint8Array(ab);\n    for (var i = 0; i < buffer.length; ++i) {\n        buffer[i] = view[i];\n    }\n    return buffer;\n  }\n\n  async _handleSocketClose (message) {\n    this._state.status = 'CLOSED';\n    console.log('[FABRIC:REMOTE]', 'Socket close:', message);\n    this.connect();\n  }\n\n  async _handleSocketError (message) {\n    console.error('[FABRIC:REMOTE]', 'Socket error:', message);\n    this.emit('error', message);\n  }\n\n  async _handleSocketMessage (packet) {\n    this.emit('debug', `[FABRIC:REMOTE] Socket packet ${JSON.stringify(packet)}`);\n    const length = packet.data.byteLength;\n    console.log('length:', length);\n    const buffer = Buffer.from(packet.data);\n    console.log('buffer:', buffer);\n    const message = Message.fromRaw(buffer).toObject();\n    console.log('message:', message);\n    this._state.messages.push(message);\n    ++this._state.meta.messages.count;\n    this.emit('message', message);\n  }\n\n  async _handleSocketOpen (message) {\n    this._state.status = 'CONNECTED';\n    this.emit('ready');\n  }\n\n  async executeMethod (name, params = []) {\n    const call = Message.fromVector([P2P_CALL, JSON.stringify([name, params])]);\n    console.log('call:', call);\n    console.log('raw:', call.toRaw());\n    return this.socket.send(call.toRaw());\n  }\n\n  async connect () {\n    this._state.status = 'CONNECTING';\n\n    try {\n      this.socket = new WebSocket(this.endpoint);\n      console.log('socket:', this.socket);\n    } catch (exception) {\n      console.error('[FABRIC:REMOTE]', 'Unable to connect:', exception);\n    }\n\n    if (this.socket) {\n      this.socket.binaryType = 'arraybuffer';\n      this.socket.addEventListener('close', this._handleSocketClose.bind(this));\n      this.socket.addEventListener('open', this._handleSocketOpen.bind(this));\n      this.socket.addEventListener('message', this._handleSocketMessage.bind(this));\n      this.socket.addEventListener('error', this._handleSocketError.bind(this));\n    }\n\n    return this;\n  }\n\n  /**\n   * Enumerate the available Resources on the remote host.\n   * @return {Configuration} An object with enumerable key/value pairs for the Application Resource Contract.\n   */\n  async enumerate () {\n    const options = await this._OPTIONS('/');\n    const results = [];\n\n    for (const name in options) {\n      const definition = options[name];\n      results.push({\n        name: definition.name,\n        description: definition.description,\n        components: Object.assign({\n          list: 'maki-resource-list',\n          view: 'maki-resource-view'\n        }, definition.components),\n        routes: definition.routes,\n        attributes: definition.attributes,\n        names: definition.names\n      });\n    }\n\n    return options;\n  }\n\n  /**\n   * Make an HTTP request to the configured authority.\n   * @param {String} type One of `GET`, `PUT`, `POST`, `DELETE`, or `OPTIONS`.\n   * @param {String} path The path to request from the authority.\n   * @param {Object} [params] Options.\n   * @returns {FabricHTTPResult}\n   */\n  async request (type, path, params = {}) {\n    const self = this;\n    const parts = self.settings.authority.split(':');\n\n    // TODO: use onion address for secure mode\n    const host = parts[0] || ((self.secure) ? 'localhost' : 'localhost');\n    let port = parts[1] || ((self.secure) ? 443 : 80);\n\n    if (this.settings.port) {\n      port = this.settings.port;\n    }\n\n    const protocol = (!self.secure) ? 'http' : 'https';\n    let url = `${protocol}://${host}:${port}${path}`;\n\n    let result = null;\n    let response = null;\n    let headers = {\n      'Accept': CONTENT_TYPE,\n      'Content-Type': CONTENT_TYPE\n    };\n\n    let opts = {\n      method: type,\n      headers: headers\n    };\n\n    // TODO: break out into independent auth module\n    if (this.settings.username || this.settings.password) {\n      headers['Authorization'] = `Basic ${Buffer.from([\n        this.settings.username || '',\n        this.settings.password || ''\n      ].join(':')).toString('base64')}`;\n    }\n\n    switch (params.mode) {\n      case 'query':\n        url += '?' + querystring.stringify(params.body);\n        break;\n      default:\n        try {\n          opts.body = JSON.stringify(params.body);\n        } catch (exception) {\n          console.error('[FABRIC:REMOTE] Could not prepare request:', exception);\n        }\n\n        opts = Object.assign(opts, {\n          body: params.body || null\n        });\n        break;\n    }\n\n    // Core Logic\n    try {\n      response = await fetch(url, opts);\n    } catch (e) {\n      self.emit('error', `[REMOTE] exception: ${e}`);\n    }\n\n    if (!response) {\n      return {\n        status: 'error',\n        message: 'No response to request.'\n      };\n    }\n\n    switch (response.status) {\n      case 404:\n        result = {\n          status: 'error',\n          message: 'Document not found.'\n        };\n        break;\n      default:\n        if (response.ok) {\n          const formatter = parser.parse(response.headers.get('content-type'));\n          switch (formatter.type) {\n            case 'application/json':\n              try {\n                result = await response.json();\n              } catch (E) {\n                console.error('[REMOTE]', 'Could not parse JSON:', E);\n              }\n              break;\n            default:\n              if (this.settings.verbosity >= 4) self.emit('warning', `[FABRIC:REMOTE] Unhandled headers content type: ${formatter.type}`);\n              result = await response.text();\n              break;\n          }\n        } else {\n          if (this.settings.verbosity >= 4) console.warn('[FABRIC:REMOTE]', 'Unmanaged HTTP status code:', response.status);\n\n          try {\n            result = response.json();\n          } catch (exception) {\n            result = response.text();\n          }\n        }\n        break;\n    }\n\n    return result;\n  }\n\n  async ping () {\n    this.send({\n      created: (new Date()).toISOString(),\n      type: 'PING'\n    });\n  }\n\n  async send (message) {\n    const msg = Message.fromVector(['GenericMessage', JSON.stringify(message)]);\n    const raw = msg.toRaw();\n\n    console.log('raw:', raw);\n    console.log('raw (string):', raw.toString('hex'));\n\n    const actor = new Actor({ content: raw.toString('hex') });\n    this.socket.send(raw);\n    return actor.id;\n  }\n\n  async sendAsJSON (message) {\n    this.socket.send({\n      content: message\n    });\n  }\n\n  /**\n   * HTTP PUT against the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} body - Map of parameters to supply.\n   * @return {FabricHTTPResult|String} Result of request.\n   */\n  async _PUT (key, body) {\n    return this.request('put', key, { body });\n  }\n\n  /**\n   * HTTP GET against the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {FabricHTTPResult|String} Result of request.\n   */\n  async _GET (key, params) {\n    return this.request('get', key, params);\n  }\n\n  /**\n   * HTTP POST against the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {FabricHTTPResult|String} Result of request.\n   */\n  async _POST (key, obj, params = {}) {\n    let result = null;\n    let options = null;\n\n    switch (params.mode) {\n      case 'query':\n        options = Object.assign({}, {\n          body: obj,\n          mode: 'query'\n        });\n        break;\n      default:\n        options = Object.assign({}, params, {\n          body: obj,\n          mode: 'body'\n        });\n        break;\n    }\n\n    result = await this.request('post', key, options);\n\n    return result;\n  }\n\n  /**\n   * HTTP OPTIONS on the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {Object} - Full description of remote resource.\n   */\n  async _OPTIONS (key, params) {\n    return this.request('options', key, params);\n  }\n\n  /**\n   * HTTP PATCH on the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} body - Map of parameters to supply.\n   * @return {Object} - Full description of remote resource.\n   */\n  async _PATCH (key, body) {\n    return this.request('patch', key, { body });\n  }\n\n  /**\n   * HTTP DELETE on the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {Object} - Full description of remote resource.\n   */\n  async _DELETE (key, params) {\n    return this.request('delete', key, params);\n  }\n\n  async _SEARCH (key, params) {\n    return this.request('search', key, params);\n  }\n}\n\nmodule.exports = Remote;\n","'use strict';\n\n// TODO: evaluate why have to climb tree?\nconst playnet = require('../../node_modules/@fabric/core/settings/playnet');\n\nmodule.exports = {\n  host: '65.21.231.166',\n  port: 9999,\n  secure: false,\n  seed: null,\n  status: 'PAUSED',\n  balances: [\n    { asset: 'Bitcoin', symbol: 'BTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'Liquid BTC (LBTC)', symbol: 'BTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'Shyft', symbol: 'SHFT', confirmed: 0, type: 'confirmed' },\n    { asset: 'Bitcoin (testnet)', symbol: 'TBTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'Bitcoin (regtest)', symbol: 'RBTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'BTC A', symbol: 'BTCA', confirmed: 0, type: 'confirmed' },\n    { asset: 'BTC B', symbol: 'BTCB', confirmed: 0, type: 'confirmed' },\n    { asset: 'Lightning BTC', symbol: 'BTC', confirmed: 0.001, type: 'outbound' },\n    { asset: 'Lightning BTC', symbol: 'BTC', confirmed: 0.001, type: 'inbound' }\n  ],\n  chains: [\n    { name: 'Fabric (playnet)', asset: 'PFAB', tip: '???' },\n    { name: 'Bitcoin (mainnet)', asset: 'BTC', tip: '???', genesis: '000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f' },\n    { name: 'Bitcoin (regtest)', asset: 'RBTC', tip: '???' },\n    { name: 'Bitcoin (testnet)', asset: 'TBTC', tip: '???' },\n    { name: 'BTC A (regtest)', asset: 'BTCA', tip: '???' },\n    { name: 'BTC B (regtest)', asset: 'BTCB', tip: '???' },\n    { name: 'Ethereum (Ropsten)', asset: 'ETHR', tip: '???' }\n  ],\n  channels: [],\n  keys: [],\n  identity: {\n    id: '',\n    seed: playnet.key.seed\n  },\n  nodes: [\n/**/'localhost:9977', // BTC   `                                              /**/\n/**/'localhost:9978', // BTCA   \\___                                          /**/\n/**/'localhost:9979', // BTCB   /    }- Together these are the first 3 chains /**/\\\n    'localhost:9980', // Liquid\n    'localhost:9981', // Shyft\n  ],\n  orders: [],\n  peers: [\n    { id: '???', alias: 'NUEVO', host: 'localhost', port: '7777', asset: 'BTC' }\n  ],\n  transactions: []\n};\n","/**\n * Create a new {@link Object} with sorted properties.\n * @param {Object} [state] Object to sort.\n * @returns {Object} Re-sorted instance of `state` as provided.\n */\nmodule.exports = function _sortKeys (state = {}) {\n  return Object.keys(state).sort().reduce((obj, key) => {\n    obj[key] = state[key];\n    return obj;\n  }, {});\n};\n","'use strict';\n\nconst {\n  MAGIC_BYTES,\n  VERSION_NUMBER,\n  HEADER_SIZE,\n  MAX_MESSAGE_SIZE,\n  OP_CYCLE,\n  GENERIC_MESSAGE_TYPE,\n  LOG_MESSAGE_TYPE,\n  GENERIC_LIST_TYPE,\n  P2P_GENERIC,\n  P2P_IDENT_REQUEST,\n  P2P_IDENT_RESPONSE,\n  P2P_ROOT,\n  P2P_PING,\n  P2P_PONG,\n  P2P_START_CHAIN,\n  P2P_INSTRUCTION,\n  P2P_BASE_MESSAGE,\n  P2P_CHAIN_SYNC_REQUEST,\n  P2P_STATE_ROOT,\n  P2P_STATE_COMMITTMENT,\n  P2P_STATE_CHANGE,\n  P2P_STATE_REQUEST,\n  P2P_TRANSACTION,\n  P2P_CALL,\n  CHAT_MESSAGE,\n  DOCUMENT_PUBLISH_TYPE,\n  DOCUMENT_REQUEST_TYPE,\n  BLOCK_CANDIDATE,\n  PEER_CANDIDATE,\n  SESSION_START\n} = require('../constants');\n\n// Dependencies\nconst crypto = require('crypto');\nconst struct = require('struct');\n\n// Fabric Types\nconst Actor = require('./actor');\nconst Label = require('./label');\n\n// Function Definitions\nconst padDigits = require('../functions/padDigits');\n\n// Type Labels\nconst TYPE_ETHEREUM_BLOCK        = parseInt((new Label('types/EthereumBlock'))._id, 16);\nconst TYPE_ETHEREUM_BLOCK_NUMBER = parseInt((new Label('types/EthereumBlockNumber'))._id, 16);\n\n/**\n * The {@link Message} type defines the Application Messaging Protocol, or AMP.\n * Each {@link Actor} in the network receives and broadcasts messages,\n * selectively disclosing new routes to peers which may have open circuits.\n * @type {Object}\n */\nclass Message extends Actor {\n  /**\n   * The `Message` type is standardized in {@link Fabric} as a {@link Array}, which can be added to any other vector to compute a resulting state.\n   * @param  {Object} message Message vector.  Will be serialized by {@link Array#_serialize}.\n   * @return {Message} Instance of the message.\n   */\n  constructor (input = {}) {\n    super(input);\n\n    this.raw = {\n      magic: Buffer.alloc(4),\n      version: Buffer.alloc(4),\n      type: Buffer.alloc(4), // TODO: 8, 32\n      size: Buffer.alloc(4), // TODO: 8, 32\n      hash: Buffer.alloc(32),\n      parent: Buffer.alloc(32),\n      data: null\n    };\n\n    this.raw.magic.write(MAGIC_BYTES.toString(16), 'hex');\n    this.raw.version.write(padDigits(VERSION_NUMBER.toString(16), 8), 'hex');\n\n    if (input.data && input.type) {\n      this.type = input.type;\n\n      if (typeof input.data !== 'string') {\n        this.data = JSON.stringify(input.data);\n      } else {\n        this.data = input.data;\n      }\n    }\n\n    // Set various properties to be unenumerable\n    for (let name of [\n      '@input',\n      '@entity',\n      '_state',\n      'config',\n      'settings',\n      'stack',\n      'observer'\n    ]) Object.defineProperty(this, name, { enumerable: false });\n\n    return this;\n  }\n\n  get body () {\n    return this.raw.data.toString('utf8');\n  }\n\n  get byte () {\n    const input = 0 + '';\n    const num = Buffer.from(`0x${padDigits(input, 8)}`, 'hex');\n    return num;\n  }\n\n  get tu16 () {\n    return parseInt(0);\n  }\n\n  get tu32 () {\n    return parseInt(0);\n  }\n\n  get tu64 () {\n    return parseInt(0);\n  }\n\n  get Uint256 () {\n    // 256 bits\n    return Buffer.from((this.raw && this.raw.hash) ? `0x${padDigits(this.raw.hash, 8)}` : crypto.randomBytes(32));\n  }\n\n  toBuffer () {\n    return this.asRaw();\n  }\n\n  /**\n   * Returns a {@link Buffer} of the complete message.\n   * @return {Buffer} Buffer of the encoded {@link Message}.\n   */\n  asRaw () {\n    return Buffer.concat([this.header, this.raw.data]);\n  }\n\n  toRaw () {\n    return this.asRaw();\n  }\n\n  asTypedArray () {\n    return new Uint8Array(this.asRaw());\n    // TODO: Node 12\n    // return new TypedArray(this.asRaw());\n  }\n\n  asBlob () {\n    return this.asRaw().map(byte => parseInt(byte, 16));\n  }\n\n  toObject () {\n    return {\n      headers: {\n        magic: parseInt(`0x${this.raw.magic.toString('hex')}`, 16),\n        version: parseInt(`${this.raw.version.toString('hex')}`, 16),\n        type: parseInt(`${this.raw.type.toString('hex')}`, 16),\n        size: parseInt(`${this.raw.size.toString('hex')}`, 16),\n        hash: this.raw.hash.toString('hex')\n      },\n      type: this.type,\n      data: this.data\n    };\n  }\n\n  fromObject (input) {\n    return new Message(input);\n  }\n\n  static parseBuffer (buffer) {\n    const message = struct()\n      .charsnt('magic', 4, 'hex')\n      .charsnt('version', 4, 'hex')\n      .charsnt('type', 4, 'hex')\n      .charsnt('size', 4, 'hex')\n      .charsnt('hash', 32, 'hex')\n      .charsnt('data', buffer.length - HEADER_SIZE);\n\n    message.allocate();\n    message._setBuff(buffer);\n\n    return message;\n  }\n\n  static fromBuffer (buffer) {\n    return Message.fromRaw(buffer);\n  }\n\n  static fromRaw (input) {\n    if (!input) return null;\n    if (!(input instanceof Buffer)) throw new Error('Input must be a buffer.');\n    // if (input.length < HEADER_SIZE) return null;\n    // if (input.length > MAX_MESSAGE_SIZE) return new Error('Input too large.');\n\n    const message = new Message();\n\n    message.raw = {\n      magic: input.slice(0, 4),\n      version: input.slice(4, 8),\n      type: input.slice(8, 12),\n      size: input.slice(12, 16),\n      hash: input.slice(16, 48)\n    };\n\n    message.data = input.slice(HEADER_SIZE);\n\n    return message;\n  }\n\n  static fromVector (vector = ['LogMessage', 'No vector provided.']) {\n    let message = null;\n\n    try {\n      message = new Message({\n        type: vector[0],\n        data: vector[1]\n      });\n    } catch (exception) {\n      console.error('[FABRIC:MESSAGE]', 'Could not construct Message:', exception);\n    }\n\n    return message;\n  }\n\n  /* get [Symbol.toStringTag] () {\n    return `<Message | ${JSON.stringify(this.raw)}>`;\n  } */\n\n  get id () {\n    return crypto.createHash('sha256').update(this.asRaw()).digest('hex');\n  }\n\n  get types () {\n    // Message Types\n    return {\n      'GenericMessage': GENERIC_MESSAGE_TYPE,\n      'GenericLogMessage': LOG_MESSAGE_TYPE,\n      'GenericList': GENERIC_LIST_TYPE,\n      'GenericQueue': GENERIC_LIST_TYPE,\n      'FabricLogMessage': LOG_MESSAGE_TYPE,\n      'FabricServiceLogMessage': LOG_MESSAGE_TYPE,\n      'GenericTransferQueue': GENERIC_LIST_TYPE,\n      // TODO: document Generic type\n      // P2P Commands\n      'Generic': P2P_GENERIC,\n      'Cycle': OP_CYCLE,\n      'IdentityRequest': P2P_IDENT_REQUEST,\n      'IdentityResponse': P2P_IDENT_RESPONSE,\n      'ChainSyncRequest': P2P_CHAIN_SYNC_REQUEST,\n      // TODO: restore this type\n      // 'StateRoot': P2P_ROOT,\n      'Ping': P2P_PING,\n      'Pong': P2P_PONG,\n      'DocumentRequest': DOCUMENT_REQUEST_TYPE,\n      'DocumentPublish': DOCUMENT_PUBLISH_TYPE,\n      'BlockCandidate': BLOCK_CANDIDATE,\n      'PeerCandidate': PEER_CANDIDATE,\n      'PeerInstruction': P2P_INSTRUCTION,\n      'PeerMessage': P2P_BASE_MESSAGE,\n      'StartSession': SESSION_START,\n      'ChatMessage': CHAT_MESSAGE,\n      'StartChain': P2P_START_CHAIN,\n      // TODO: restore above StateRoot type\n      'StateRoot': P2P_STATE_ROOT,\n      'StateCommitment': P2P_STATE_COMMITTMENT,\n      'StateChange': P2P_STATE_CHANGE,\n      'StateRequest': P2P_STATE_REQUEST,\n      'Transaction': P2P_TRANSACTION,\n      'Call': P2P_CALL,\n      'LogMessage': LOG_MESSAGE_TYPE,\n      'EthereumBlock': TYPE_ETHEREUM_BLOCK,\n      'EthereumBlockNumber': TYPE_ETHEREUM_BLOCK_NUMBER\n    };\n  }\n\n  get codes () {\n    return Object.entries(this.types).reduce((ret, entry) => {\n      const [ key, value ] = entry;\n      ret[ value ] = key;\n      return ret;\n    }, {});\n  }\n\n  get magic () {\n    return this.raw.magic;\n  }\n\n  get size () {\n    return parseInt(Buffer.from(this.raw.size, 'hex'));\n  }\n\n  get version () {\n    return parseInt(Buffer.from(this.raw.version));\n  }\n\n  get header () {\n    const parts = [\n      Buffer.from(this.raw.magic, 'hex'),\n      Buffer.from(this.raw.version, 'hex'),\n      Buffer.from(this.raw.type, 'hex'),\n      Buffer.from(this.raw.size, 'hex'),\n      Buffer.from(this.raw.hash, 'hex')\n    ];\n\n    return Buffer.concat(parts);\n  }\n}\n\nObject.defineProperty(Message.prototype, 'type', {\n  get () {\n    const code = parseInt(this.raw.type.toString('hex'), 16);\n    switch (code) {\n      case GENERIC_MESSAGE_TYPE:\n        return 'GenericMessage';\n      case LOG_MESSAGE_TYPE:\n        return 'GenericLogMessage';\n      case GENERIC_LIST_TYPE:\n        return 'GenericList';\n      case DOCUMENT_PUBLISH_TYPE:\n        return 'DocumentPublish';\n      case DOCUMENT_REQUEST_TYPE:\n        return 'DocumentRequest';\n      case BLOCK_CANDIDATE:\n        return 'BlockCandidate';\n      case OP_CYCLE:\n        return 'Cycle';\n      case P2P_PING:\n        return 'Ping';\n      case P2P_PONG:\n        return 'Pong';\n      case P2P_GENERIC:\n        return 'Generic';\n      case P2P_CHAIN_SYNC_REQUEST:\n        return 'ChainSyncRequest';\n      case P2P_IDENT_REQUEST:\n        return 'IdentityRequest';\n      case P2P_IDENT_RESPONSE:\n        return 'IdentityResponse';\n      case P2P_BASE_MESSAGE:\n        return 'PeerMessage';\n      case P2P_STATE_ROOT:\n        return 'StateRoot';\n      case P2P_STATE_CHANGE:\n        return 'StateChange';\n      case P2P_STATE_REQUEST:\n        return 'StateRequest';\n      case P2P_TRANSACTION:\n        return 'Transaction';\n      case P2P_CALL:\n        return 'Call';\n      case PEER_CANDIDATE:\n        return 'PeerCandidate';\n      case SESSION_START:\n        return 'StartSession';\n      case CHAT_MESSAGE:\n        return 'ChatMessage';\n      case P2P_START_CHAIN:\n        return 'StartChain';\n      case TYPE_ETHEREUM_BLOCK:\n        return 'EthereumBlock';\n      case TYPE_ETHEREUM_BLOCK_NUMBER:\n        return 'EthereumBlockNumber';\n      default:\n        return 'GenericMessage';\n    }\n  },\n  set (value) {\n    let code = this.types[value];\n    // Default to GenericMessage;\n    if (!code) {\n      this.emit('warning', `Unknown message type: ${value}`);\n      code = this.types['GenericMessage'];\n    }\n\n    const padded = padDigits(code.toString(16), 8);\n    this['@type'] = value;\n    this.raw.type.write(padded, 'hex');\n  }\n});\n\nObject.defineProperty(Message.prototype, 'data', {\n  get () {\n    if (!this.raw.data) return '';\n    return this.raw.data.toString('utf8');\n  },\n  set (value) {\n    if (!value) value = '';\n    const hash = crypto.createHash('sha256').update(value.toString('utf8'));\n    this.raw.hash = hash.digest();\n    this.raw.data = Buffer.from(value);\n    this.raw.size.write(padDigits(this.raw.data.byteLength.toString(16), 8), 'hex');\n  }\n});\n\nmodule.exports = Message;\n","'use strict';\n\nconst Actor = require('./actor');\nconst Hash256 = require('./hash256');\n\nclass Label extends Actor {\n  constructor (input = '') {\n    super(input);\n    if (typeof input != 'string') input = super.serialize(input);\n    this._id = Hash256.digest(`@labels/${input}`);\n    return this;\n  }\n}\n\nmodule.exports = Label;\n","'use strict';\n\nmodule.exports = function padDigits (number, digits) {\n  return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","// Defaults\nimport * as state from '../settings/state';\n\n// Dependencies\nimport * as EC from '../../node_modules/elliptic/lib/elliptic/ec';\nimport merge from 'lodash.merge';\nimport React, { Component } from 'react';\n// import { connect } from 'react-redux';\n// import * as d3 from 'd3';\n// import * as D3GraphViz from 'd3-graphviz';\n// import { Graphviz } from 'graphviz-react';\n\n// Components\n// import FabricStateMapper from '../StateMapper';\nimport * as Actor from '@fabric/core/types/actor';\nimport { Card } from 'semantic-ui-react';\n\nclass FabricComponent extends Component {\n  constructor (props) {\n    super(props);\n\n    if (props.import) {\n      this.state = merge({\n        integrity: null,\n        status: 'PAUSED'\n      }, state, props);\n    }\n\n    // Fabric Actor\n    this.actor = new Actor(this.state);\n    this.ec = new EC('secp256k1');\n\n    // React Element\n    this.ref = React.createRef();\n\n    return this;\n  }\n\n  get genesis () {\n    return (this.actor) ? this.actor.id : '00000000000000000000000000000000';\n  }\n\n  get dochash () {\n    return (this.actor) ? this.actor.id : '00000000000000000000000000000000';\n  }\n\n  get link () {\n    return `fabric:${this.dochash}`;\n  }\n\n  get integrity () {\n    return 'sha256-deadbeefbabe';\n  }\n\n  componentDidMount () {\n    this.start();\n    console.log('[FABRIC:COMPONENT]', 'Mounted:', this);\n  }\n\n  componentWillReceiveProps (props) {\n    this.setState({\n      hash: props.hash\n    });\n  }\n\n  render () {\n    const dot = 'graph{a--b}';;\n    return (\n      <>\n        <fabric-component ref={this.ref}>\n          <Card>\n            <Card.Content>\n              <fabric-graph>\n                <svg id='graph' />\n                {/* <Graphviz dot={dot} /> */}\n              </fabric-graph>\n            </Card.Content>\n            <Card.Content>{this.props.children}</Card.Content>\n          </Card>\n        </fabric-component>\n      </>\n    );\n  }\n\n  start () {\n    const actor = new Actor(this.state);\n    console.log('actor:', actor);\n    console.log('actor ID:', actor.id.constructor.name, actor.id);\n    this.setState({ hash: actor.id });\n\n    // this.setState({ status: 'STARTED' });\n    // d3.select('#graph').graphviz().renderDot('digraph {a -> b}');\n\n    return this;\n  }\n}\n\nexport default FabricComponent;\n\n// TODO: debug why this can't be used on this parent class...\n// ```\n// TypeError: Class extends value #<Object> is not a constructor or null\n// Module.<anonymous>\n// src/components/FabricIdentityManager.js:19\n//   16 | import IdentityPicker from './IdentityPicker';\n//   17 | import SeedEntryForm from './SeedEntryForm';\n//   18 | \n// > 19 | class FabricIdentityManager extends FabricComponent {\n//   20 |   constructor (props) {\n//   21 |     super(props);\n//   22 | \n// ```\n// export default connect(FabricStateMapper)(FabricComponent);\n//\n// ...\n// End of @fabric/core/types/component\n","// State\nimport * as defaults from '../settings/state';\n\n// Dependencies\nimport merge from 'lodash.merge';\nimport FabricComponent from '../types/component';\n\n// Components\nimport {\n  Button,\n  Card,\n  Feed,\n  Icon,\n  Label\n} from 'semantic-ui-react';\n\n// Fabric Types\n// import * as Store from '@fabric/core/types/store';\n// import * as Worker from '@fabric/core/types/worker';\nimport * as Remote from '@fabric/http/types/remote';\n\nclass FabricBridge extends FabricComponent {\n  constructor (props) {\n    super(props);\n\n    this.settings = Object.assign({\n      host: 'localhost',\n      port: 9999\n    }, props);\n\n    this.state = merge({\n      integrity: 'sha256-deadbeefbabe',\n      status: 'disconnected',\n      messages: [],\n      meta: {\n        messages: {\n          count: 0\n        }\n      }\n    }, defaults, props);\n\n    console.log('bridge settings:', this.settings);\n\n    this.remote = new Remote({\n      host: this.settings.host,\n      port: this.settings.port,\n      secure: this.settings.secure\n    });\n\n    /* this.agent = new Worker({\n      service: main,\n      settings: settings\n    }); */\n\n    return this;\n  }\n\n  _handleRemoteMessage (message) {\n    console.log('Remote message:', message);\n    this._syncState();\n  }\n\n  _handleRemoteError (error) {\n    console.log('Remote error:', error);\n  }\n\n  _syncState () {\n    this.setState({\n      status: this.remote._state.status,\n      messages: this.remote._state.messages,\n      meta: this.remote._state.meta\n    });\n  }\n\n  componentDidMount () {\n    console.log('bridge mounted! starting...');\n    // this.agent.executeMethod('connect');\n    // this.process.executeMethod('connect');\n    this.start();\n  }\n\n  connect () {\n    this._syncState();\n    this.remote.connect();\n    this._syncState();\n  }\n\n  executeMethod (name, params) {\n    return this.remote.executeMethod(name, params);\n  }\n\n  ping () {\n    this.remote.ping();\n  }\n\n  render () {\n    return (\n      <>\n        <Card fluid>\n          <Card.Content>\n            <Button.Group floated='right'>\n              <Button onClick={this.ping.bind(this)}>Ping <Icon name='info' /></Button>\n              <Button onClick={this.connect.bind(this)}>Connect <Icon name='lightning' /></Button>\n            </Button.Group>\n            <Card.Header as='h3'>Bridge</Card.Header>\n          </Card.Content>\n          <Card.Content>\n            <Feed>\n              {this.state.messages.map((message, i) => {\n                return (\n                  <Feed.Event size='small' key={i} style={{ fontSize: '0.8em', fontFamily: 'monospace' }}>\n                    <Feed.Content>\n                      <div style={{color: 'black'}}>{JSON.stringify(message, null, '  ')}</div>\n                    </Feed.Content>\n                  </Feed.Event>\n                );\n              })}\n            </Feed>\n          </Card.Content>\n          <Card.Content extra>\n            <Label><Icon name='info' /> {this.remote._state.status}</Label>\n            <Label><Icon name='mail' /> {this.remote._state.meta.messages.count}</Label>\n          </Card.Content>\n        </Card>\n      </>\n    );\n  }\n\n  async _handleRemoteReady () {\n    this._syncState();\n    console.log('Remote ready!');\n    const balances = await this.executeMethod('btc_getbalances');\n    console.log('balances:', balances);\n  }\n\n  async send (message) {\n    return this.remote.send(message);\n  }\n\n  async start () {\n    this.remote.on('ready', this._handleRemoteReady.bind(this));\n    this.remote.on('message', this._handleRemoteMessage.bind(this));\n    this.remote.on('error', this._handleRemoteError.bind(this));\n    this.connect();\n  }\n}\n\nexport default FabricBridge;\n","import FabricComponent from '../types/component';\n\n// Components\nimport {\n  Button,\n  // Card,\n  // Container,\n  Icon,\n  // Grid,\n  Header,\n  // Label,\n  // Menu,\n  // Segment,\n  Table,\n  Card\n} from 'semantic-ui-react';\n\nclass TransactionList extends FabricComponent {\n  constructor (props) {\n    super(props);\n    this.state = {\n      transactions: [],\n      integrity: 'sha256-deadbeefbabe'\n    };\n  }\n\n  _addKey (key) {\n    // TODO: merge proper\n    this.setState({ keys: this.state.keys.concat(key) });\n  }\n\n  render () {\n    return (\n      <>\n        <div className='ui vertical stripe segment'>\n          <div className='ui stackable grid container'>\n            <div className='row'>\n              <div className='column'>\n                <Card fluid>\n                  <Card.Content>\n                    <Header><h1><Icon name='tasks' /> Transactions</h1></Header>\n                    <Table celled>\n                      <Table.Header>\n                        <Table.Row>\n                          <Table.HeaderCell>ID</Table.HeaderCell>\n                          <Table.HeaderCell>Version</Table.HeaderCell>\n                          <Table.HeaderCell>Inputs</Table.HeaderCell>\n                          <Table.HeaderCell>Outputs</Table.HeaderCell>\n                          <Table.HeaderCell>Signature</Table.HeaderCell>\n                        </Table.Row>\n                      </Table.Header>\n                      <Table.Body>\n                        {this.state.transactions.map((transaction, index) => {\n                          return (\n                            <Table.Row key={index}>\n                              <Table.Cell>{transaction.id}</Table.Cell>\n                              <Table.Cell>{transaction.version}</Table.Cell>\n                              <Table.Cell>{transaction.inputs}</Table.Cell>\n                              <Table.Cell>{transaction.outputs}</Table.Cell>\n                              <Table.Cell>{transaction.signature}</Table.Cell>\n                            </Table.Row>\n                          );\n                        })}\n                      </Table.Body>\n                      {/* <Table.Footer>\n                        <Table.Row>\n                          <Table.HeaderCell colSpan='3'>\n                            <Menu floated='right' pagination>\n                              <Menu.Item as='a' icon>\n                                <Icon name='chevron left' />\n                              </Menu.Item>\n                              <Menu.Item as='a'>1</Menu.Item>\n                              <Menu.Item as='a'>2</Menu.Item>\n                              <Menu.Item as='a'>3</Menu.Item>\n                              <Menu.Item as='a'>4</Menu.Item>\n                              <Menu.Item as='a' icon>\n                                <Icon name='chevron right' />\n                              </Menu.Item>\n                            </Menu>\n                          </Table.HeaderCell>\n                        </Table.Row>\n                      </Table.Footer> */}\n                    </Table>\n                  </Card.Content>\n                </Card>\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default TransactionList;\n","// Cryptography\nimport { createHash } from 'crypto';\n\n// Dependencies\nimport * as bitcoin from 'bitcoinjs-lib';\n\n// React\nimport merge from 'lodash.merge';\nimport React from 'react';\n// import { connect } from 'react-redux';\n// import FabricStateMapper from '../StateMapper';\n\n// Fabric Types\nimport FabricComponent from '../types/component';\n\n// Fabric Services\n// import Bitcoin from '@fabric/core/services/bitcoin';\n\n// Components\nimport {\n  Button,\n  // Container,\n  Dropdown,\n  Form,\n  // Grid,\n  Icon,\n  Input\n  // Menu,\n  // Segment\n} from 'semantic-ui-react';\n\n// Internals\n// import FabricKeyPair from './FabricKeyPair';\n\n// Fabric Types\nimport * as Actor from '@fabric/core/types/actor';\n// import * as Key from '@fabric/core/types/key';\n// import * as Signer from '@fabric/core/types/signer';\n\nclass FaucetDripForm extends FabricComponent {\n  constructor (props) {\n    super(props);\n\n    this.settings = merge({\n      network: 'regtest'\n    }, props);\n\n    /* this.wallet = new Wallet({\n      network: this.settings.network\n    }); */\n\n    // this.key = new Key(this.settings);\n    // this._key = new bcoin.hd.key();\n\n    // TODO: prepare Fabric\n    // i.e., use _state here, then import from getter and apply properties\n    // _from_ @react\n    this.state = merge({\n      content: {\n        requests: []\n      },\n      fields: {\n        address: ''\n      },\n      requests: {},\n      secret: Actor.randomBytes(32) // solution hash (revealed on trade)\n    }, props);\n\n    // this.bitcoin = new Bitcoin(this.settings);\n    this.form = React.createRef();\n\n    return this;\n  }\n\n  get networks () {\n    return {\n      'mainnet': bitcoin.networks.mainnet,\n      'regtest': bitcoin.networks.regtest,\n      'testnet': bitcoin.networks.testnet\n    };\n  }\n\n  _handleAddressChange (e) {\n    this.setState({\n      fields: {\n        address: e.target.value\n      }\n    });\n\n    console.log('state:', this.state);\n    console.log('value:', e.target.value);\n    console.log('network:', this.networks.regtest);\n    const isValid = this.validateAddress(e.target.value);\n    console.log('isValid:', isValid);\n\n    if (isValid) {\n\n    } else {\n      this.setState({\n        status: 'ERROR',\n        errors: [\n          'Invalid Bitcoin address.'\n        ]\n      });\n    }\n  }\n\n  _handleSecretChange (e) {\n    this.setState({ secret: e.target.value });\n  }\n\n  _handleSubmitButtonClick (e) {\n    console.log('submit button click:', e);\n  }\n\n  handleChange (e) {\n    const fields = { ...this.state.fields, [e.target.name]: e.target.value };\n    // TODO: merge old state\n    this.setState({ fields: fields });\n  }\n\n  handleSubmit (e) {\n    console.log('submitting:', e);\n    const { name, email } = this.state;\n    this.setState({ submittedName: name, submittedEmail: email });\n  }\n\n  regenerate () {\n    this.setState({ secret: Actor.randomBytes(32) });\n    this.sync();\n  }\n\n  render () {\n    return (\n      <>\n        <Form ref={this.form} onSubmit={this.props.onSubmit.bind(this)} onChange={this.handleChange.bind(this)}>\n          <Form.Field>\n            <label>Request a deposit to...</label>\n            <div className='ui input'>\n              <Input action type='text' placeholder='Enter a Bitcoin address here' value={this.state.address} onKeyUp={this._handleAddressChange.bind(this)} />\n              <Button attached type='submit' color='green' content='Request' icon='right chevron' labelPosition='right' onClick={this.props.onSubmit.bind(this)} />\n            </div>\n          </Form.Field>\n        </Form>\n      </>\n    );\n  }\n\n  start () {\n    console.log('[FAUCET:DRIPS]', 'Starting component...');\n    super.start();\n    this.sync();\n    return this;\n  }\n\n  sync () {\n    const preimage = createHash('sha256').update(this.state.secret).digest('hex');\n    this.setState({ preimage: preimage });\n    return this;\n  }\n\n  validateAddress (address) {\n    try {\n      bitcoin.address.toOutputScript(address, this.networks[this.settings.network]);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n}\n\n// export default PortalOrderForm;\nexport default FaucetDripForm;\n","// Dependencies\nimport React from 'react';\nimport {\n  Link\n} from 'react-router-dom';\n\n// Components\nimport {\n  Card,\n  Container,\n  Divider,\n  Icon,\n  // Grid,\n  // Menu,\n  Segment,\n  Visibility\n} from 'semantic-ui-react';\n\nimport FabricComponent from './types/component';\n\nimport FabricBridge from './components/FabricBridge';\n// import FabricDebugger from './components/FabricDebugger';\n\nimport FaucetDripForm from './components/FaucetDripForm';\n// import FabricIdentityManager from './components/FabricIdentityManager';\n// import PortalMenu from './components/PortalMenu';\n\nclass Home extends FabricComponent {\n  constructor (props) {\n    super(props);\n\n    // TODO: prepare Fabric\n    // i.e., use _state here, then import from getter and apply properties\n    // _from_ @react\n    this.state = Object.assign({\n      host: 'localhost',\n      integrity: 'sha256-deadbeefbabe'\n    }, props);\n\n    this.bridge = React.createRef();\n    this.form = React.createRef();\n\n    return;\n  }\n\n  onSubmit (e) {\n    console.log('submitting:', e);\n    console.log('address from ref:', this.form.current.state);\n\n    const message = {\n      type: 'Call',\n      data: {\n        method: 'DripRequest',\n        params: [ this.form.current.state.fields.address ]\n      }\n    };\n\n    this.bridge.current.send(message).then((result) => {\n      console.log('result:', result);\n    });\n  }\n\n  render () {\n    return (\n      <>\n        <fabric-bridge-home ref={this.ref}>\n          <Visibility onBottomPassed={this._handleMastheadBottomPassed.bind(this)}>\n            <Segment className='ui inverted vertical masthead center aligned segment'>\n              <Container className='ui text container'>\n                <h1 className='ui inverted header'><Icon name='tint' /> bitfaucet</h1>\n                <h2>The official <code>@fabric/playnet</code> faucet.</h2>\n                <Container className='left aligned' style={{ marginTop: '5em' }}>\n                  <Card fluid>\n                    <Card.Content>\n                      <FaucetDripForm ref={this.form} onSubmit={this.onSubmit.bind(this)} />\n                    </Card.Content>\n                  </Card>\n                  <Card fluid>\n                    <Card.Content>\n                      <FabricBridge ref={this.bridge} host={this.state.host} onChange={this._handleBridgeChange.bind(this)} state={this.state} />\n                    </Card.Content>\n                  </Card>\n                </Container>\n              </Container>\n            </Segment>\n          </Visibility>\n        </fabric-bridge-home>\n      </>\n    );\n  }\n\n  _handleBridgeChange (event) {\n    console.log('bridge change:', event);\n  }\n\n  _handleMastheadBottomPassed (e, { calculations }) {\n    console.log('vis change:', e, calculations);\n    this.setState({ calculations });\n  }\n}\n\nexport default Home;\n","// Dependencies\nimport * as state from './settings/state';\nimport * as merge from 'lodash.merge';\n\n// React\nimport React from 'react';\n// import { Provider } from 'react-redux';\n// import { createStore } from 'redux';\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Routes\n} from 'react-router-dom';\n// import * as Fabric from '@fabric/core';\n\n// Stylesheets\nimport './App.css';\nimport './semantic.css';\nimport './index.css';\n\n// Components\n/* import {\n  Container,\n  Divider,\n  Grid,\n  Icon,\n  Menu,\n  Segment,\n  Sidebar,\n  // Visibility\n} from 'semantic-ui-react'; */\n\n// Fabric Types\nimport Actor from '@fabric/core/types/actor';\nimport FabricComponent from './types/component';\n\n// Fabric Components\nimport FabricBridge from './components/FabricBridge';\nimport FabricDebugger from './components/FabricDebugger';\n// import FabricIdentityManager from './components/FabricIdentityManager';\n// import FabricNodeList from './components/FabricNodeList';\nimport FabricTransactionList from './components/FabricTransactionList';\n\n// Portal\nimport Home from './Home';\n\n/**\n * The Portal web application.\n */\nclass App extends FabricComponent {\n  constructor (settings) {\n    super(settings);\n\n    this.settings = merge({}, state, settings);\n\n    // this.fabric = new Fabric();\n    this.state = merge({\n      actor: null,\n      host: 'localhost',\n      integrity: null,\n      snapshots: []\n    }, state, settings);\n\n    return this;\n  }\n\n  _handleBridgeChange (event) {\n    console.log('bridge change:', event);\n  }\n\n  componentDidMount () {\n    const proof = new Actor(this.state);\n    return this;\n  }\n\n  render () {\n    return (\n      <react-application id='root'>\n        <Router>\n          <div className='pusher'>\n            <Routes>\n              <Route path='/' exact element={<Home state={this.state} balances={this.state.balances} keys={this.state.keys} host={this.state.host} />} />\n              <Route path='/transactions' element={<FabricTransactionList state={this.state} balances={this.state.balances} keys={this.state.keys} />} />\n            </Routes>\n            {/*\n            <Segment className='ui inverted vertical footer segment'>\n              <Container className='ui container'>\n                <FabricDebugger />\n                <Divider />\n                <FabricBridge onChange={this._handleBridgeChange.bind(this)} port={this.settings.port} />\n              </Container>\n            </Segment>\n            */}\n          </div>\n        </Router>\n      </react-application>\n    );\n  }\n}\n\nexport default App;\n","/**\n * Copyright: 2019, Fabric Labs\n */\n\n// React\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// Redux\n// import { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\n// import createSagaMiddleware from 'redux-saga';\n\n// Assets\nimport * as state from './settings/state';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\n// Components\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\n// Functions\n// import sendToAnalytics from './functions/sendToAnalytics';\n\n// State\nimport * as initialState from './settings/state';\n\nfunction reducer (state = initialState, action = { type: 'UNDEFINED_ACTION' }) {\n  switch (action.type) {\n    case 'SEED_ADDED':\n      return {\n        seed: state.seed\n      };\n    case 'RESET':\n      return {\n        status: 'RESET'\n      };\n    default:\n      return state;\n  }\n}\n\n// const sagas = createSagaMiddleware();\n// const store = createStore(reducer, applyMiddleware(sagas));\n\n// sagas.run(RPCRequest);\n\nReactDOM.render(\n  <React.StrictMode>\n    {/* <Provider store={store}> */}\n    {/* <Provider> */}\n      <App state={state} host={state.host} />\n    {/* </Provider> */}\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// TODO: enable Service Worker by disabling the line below, then test Fabric's\n// cache and the `@fabric/core/types/store` class — latest should be completely\n// isomorphic, so we're almost fully able to run in the browser now!\nserviceWorker.unregister();\n\n// reportWebVitals(sendToAnalytics);\n"],"sourceRoot":""}