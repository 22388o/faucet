{"version":3,"sources":["../../fabric-workspace/types/hash256.js","../../fabric-workspace/constants.js","../../web/types/remote.js","settings/state.js","../../fabric-workspace/functions/_sortKeys.js","../../fabric-workspace/types/message.js","../../fabric-workspace/types/label.js","../../fabric-workspace/functions/padDigits.js","serviceWorker.js","types/component.js","components/FabricBridge.js","components/FabricTransactionList.js","components/FaucetDripForm.js","Home.js","App.js","index.js","../../fabric-workspace/types/actor.js"],"names":["crypto","require","Hash256","settings","input","randomBytes","toString","this","Object","assign","hash","digest","value","reverse","Buffer","Error","createHash","update","from","module","exports","MAGIC_BYTES","GENERIC_MESSAGE_TYPE","parseInt","slice","LOG_MESSAGE_TYPE","GENERIC_LIST_TYPE","PEER_PORT","MAX_PEERS","PRECISION","BITCOIN_GENESIS","BITCOIN_GENESIS_ROOT","FABRIC_KEY_DERIVATION_PATH","HEADER_SIZE","LARGE_COLLECTION_SIZE","BLOCK_CANDIDATE","CHAT_MESSAGE","ZERO_LENGTH_PLAINTEXT","LIGHTNING_TEST_HEADER","LIGHTNING_PROTOCOL_H_INIT","LIGHTNING_PROTOCOL_PROLOGUE","LIGHTNING_BMM_HEADER","LIGHTNING_SIDECHAIN_NUM","LIGHTNING_SIDEBLOCK_HASH","LIGHTNING_PARENT_SIDEBLOCK_HASH","MAX_FRAME_SIZE","MAX_MEMORY_ALLOC","MAX_STACK_HEIGHT","MAX_MESSAGE_SIZE","MAX_CHANNEL_VALUE","MAX_CHAT_MESSAGE_LENGTH","MAX_TX_PER_BLOCK","MACHINE_MAX_MEMORY","OP_CYCLE","OP_DONE","OP_0","OP_36","OP_CHECKSIG","OP_DUP","OP_EQUAL","OP_SHA256","OP_HASH160","OP_PUSHDATA1","OP_RETURN","OP_EQUALVERIFY","OP_SEPARATOR","P2P_GENERIC","P2P_IDENT_REQUEST","P2P_IDENT_RESPONSE","P2P_CHAIN_SYNC_REQUEST","P2P_ROOT","P2P_PING","P2P_PONG","P2P_START_CHAIN","P2P_INSTRUCTION","P2P_BASE_MESSAGE","P2P_STATE_ROOT","P2P_STATE_COMMITTMENT","P2P_STATE_CHANGE","P2P_STATE_REQUEST","P2P_TRANSACTION","P2P_CALL","P2P_SESSION_ACK","PEER_CANDIDATE","DOCUMENT_PUBLISH_TYPE","DOCUMENT_REQUEST_TYPE","SESSION_START","VERSION_NUMBER","querystring","fetch","parser","Actor","WebSocket","Message","CONTENT_TYPE","Remote","config","authority","entropy","Math","random","secure","port","host","socket","endpoint","_state","status","messages","meta","count","Uint8Array","buffer","isArrayBufferSupported","arrayBufferToBufferAsArgument","arrayBufferToBufferCycle","ab","byteLength","view","i","length","message","console","log","connect","error","emit","packet","JSON","stringify","data","fromRaw","toObject","push","name","params","call","fromVector","toRaw","send","exception","binaryType","addEventListener","_handleSocketClose","bind","_handleSocketOpen","_handleSocketMessage","_handleSocketError","_OPTIONS","options","results","definition","description","components","list","routes","attributes","names","type","path","parts","self","split","protocol","url","result","response","opts","method","headers","username","password","join","mode","body","ok","formatter","parse","get","json","verbosity","text","warn","created","Date","toISOString","msg","raw","actor","content","id","key","request","obj","playnet","seed","balances","asset","symbol","confirmed","chains","tip","genesis","channels","keys","identity","nodes","orders","peers","alias","transactions","state","sort","reduce","struct","Label","padDigits","TYPE_ETHEREUM_BLOCK","_id","TYPE_ETHEREUM_BLOCK_NUMBER","magic","alloc","version","size","parent","write","defineProperty","enumerable","asRaw","concat","header","map","byte","entries","types","ret","entry","charsnt","allocate","_setBuff","vector","prototype","set","code","padded","number","digits","Array","max","String","Boolean","window","location","hostname","match","FabricComponent","props","import","merge","integrity","ec","EC","ref","React","createRef","dochash","start","setState","Card","Content","children","constructor","Component","FabricBridge","defaults","remote","_syncState","executeMethod","ping","fluid","Button","Group","floated","onClick","Icon","Header","as","Feed","Event","style","fontSize","fontFamily","color","extra","a","on","_handleRemoteReady","_handleRemoteMessage","_handleRemoteError","TransactionList","className","Table","celled","Row","HeaderCell","Body","transaction","index","Cell","inputs","outputs","signature","FaucetDripForm","network","requests","fields","address","secret","form","bitcoin","mainnet","regtest","testnet","e","target","networks","isValid","validateAddress","errors","email","submittedName","submittedEmail","sync","Form","onSubmit","onChange","handleChange","Field","Input","action","placeholder","onKeyUp","_handleAddressChange","attached","icon","labelPosition","preimage","toOutputScript","Home","bridge","current","then","Visibility","onBottomPassed","_handleMastheadBottomPassed","Segment","Container","marginTop","_handleBridgeChange","event","calculations","App","snapshots","exact","element","FabricTransactionList","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","EventEmitter","_sortKeys","_readObject","string","serialize","format","commit","encoding","E","trace"],"mappings":"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","file":"static/js/main.acfc11fc.chunk.js","sourcesContent":["'use strict';\n\nconst crypto = require('crypto');\n\n/**\n * Simple interaction with 256-bit spaces.\n */\nclass Hash256 {\n  /**\n   * Create an instance of a `Hash256` object by calling `new Hash256()`,\n   * where `settings` can be provided to supply a particular input object.\n   * \n   * If the `settings` is not a string, `input` must be provided.\n   * @param {Object} settings \n   * @param {String} settings.input Input string to map as 256-bit hash.\n   */\n  constructor (settings = {}) {\n    if (typeof settings === 'string') settings = { input: settings };\n    if (!settings.input) settings.input = crypto.randomBytes(32).toString('hex');\n\n    this.settings = Object.assign({\n      hash: Hash256.digest(settings.input)\n    }, settings);\n  }\n\n  /**\n   * Produce a SHA256 digest of some input data.\n   * @param {String|Buffer} input Content to digest.\n   * @returns {String} `SHA256(input)` as a hexadecimal string.\n   */\n  static digest (input) {\n    if (typeof input !== 'string' && !(input instanceof Buffer)) {\n      throw new Error(`Input to process must be of type \"String\" or \"Buffer\" to digest.`);\n    }\n\n    // consume and output as string\n    return crypto.createHash('sha256').update(input).digest('hex');\n  }\n\n  // TODO: document `hash256.value`\n  get value () {\n    return Hash256.digest(this.settings.input);\n  }\n\n  /**\n   * Reverses the bytes of the digest.\n   */\n  static reverse (input = '') {\n    return Buffer.from(input, 'hex').reverse().toString('hex');\n  }\n\n  reverse (input = this.value) {\n    return Hash256.reverse(input);\n  }\n}\n\nmodule.exports = Hash256;","/*\n  Fabric Core Constants.\n  ---\n  Author: Fabric Labs\n  Copyright: All Rights Reserved.\n */\n'use strict';\n\n// Dependencies\nconst crypto = require('crypto');\n\n// Networking and Environment\nconst PEER_PORT = 9999;\nconst MAX_PEERS = 32;\nconst PRECISION = 100;\n\n// Fabric Core\nconst BITCOIN_GENESIS = '000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f';\nconst BITCOIN_GENESIS_ROOT = '4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b';\nconst FABRIC_KEY_DERIVATION_PATH = \"m/44'/0'/0'/0/0\";\n\n// Message Constants\nconst MAGIC_BYTES = 0xC0D3F33D;\nconst VERSION_NUMBER = 0x00; // 0 for development, pre-alpha, 1 for production\nconst HEADER_SIZE = 48; // 32 + 16 bytes\nconst LARGE_COLLECTION_SIZE = 10; // TODO: test with 1,000,000\nconst MAX_MESSAGE_SIZE = 4096 - HEADER_SIZE;\n\n// Stacks and Frames\nconst MAX_STACK_HEIGHT = 32; // max height of stack (number of elements)\nconst MAX_FRAME_SIZE = 32; // max size of a stack frame in bytes\nconst MAX_MEMORY_ALLOC = MAX_STACK_HEIGHT * MAX_FRAME_SIZE;\nconst MAX_TX_PER_BLOCK = 100;\nconst MAX_CHANNEL_VALUE = 100000000;\n\n// Machine Constraints\nconst MACHINE_MAX_MEMORY = MAX_MEMORY_ALLOC * MAX_MESSAGE_SIZE;\nconst MAX_CHAT_MESSAGE_LENGTH = 2048;\n\n// FABRIC ONLY\nconst GENERIC_MESSAGE_TYPE = MAGIC_BYTES + parseInt(crypto.createHash('sha256').update('@types/GenericMessage').digest('hex').slice(0, 4), 16);\nconst LOG_MESSAGE_TYPE = MAGIC_BYTES + parseInt(crypto.createHash('sha256').update('@types/GenericLogMessage').digest('hex').slice(0, 4), 16);\nconst GENERIC_LIST_TYPE = MAGIC_BYTES + parseInt(crypto.createHash('sha256').update('@types/GenericList').digest('hex').slice(0, 4), 16);\nconst DOCUMENT_PUBLISH_TYPE = 998;\nconst DOCUMENT_REQUEST_TYPE = 999;\n\n// Opcodes\nconst OP_CYCLE = '00';\nconst OP_DONE = 'ff';\n\n// Bitcoin\nconst OP_0 = '00';\nconst OP_36 = '24';\nconst OP_CHECKSIG = 'ac';\nconst OP_DUP = '76';\nconst OP_EQUAL = '87';\nconst OP_SHA256 = 'a8';\nconst OP_HASH160 = 'a9';\nconst OP_PUSHDATA1 = '4c';\nconst OP_RETURN = '6a';\nconst OP_EQUALVERIFY = '88';\nconst OP_SEPARATOR = 'ab';\n\nconst P2P_GENERIC = 0x80; // 128 in decimal\nconst P2P_IDENT_REQUEST = 0x01; // 1, or the identity\nconst P2P_IDENT_RESPONSE = 0x11;\nconst P2P_ROOT = 0x00000000;\nconst P2P_PING = 0x00000012; // same ID as Lightning (18)\nconst P2P_PONG = 0x00000013; // same ID as Lightning (19)\nconst P2P_INSTRUCTION = 0x00000020; // TODO: select w/ no overlap\nconst P2P_START_CHAIN = 0x00000021;\nconst P2P_STATE_REQUEST = 0x00000029; // TODO: select w/ no overlap\nconst P2P_STATE_ROOT = 0x00000030; // TODO: select w/ no overlap\nconst P2P_BASE_MESSAGE = 0x00000031; // TODO: select w/ no overlap\nconst P2P_STATE_COMMITTMENT = 0x00000032; // TODO: select w/ no overlap\nconst P2P_STATE_CHANGE = 0x00000033; // TODO: select w/ no overlap\nconst P2P_TRANSACTION = 0x00000039; // TODO: select w/ no overlap\nconst P2P_CALL = 0x00000042;\nconst P2P_CHAIN_SYNC_REQUEST = 0x55;\nconst P2P_SESSION_ACK = 0x4200;\n\nconst PEER_CANDIDATE = 0x09;\n// TODO: should be 0x02 for Bitcoin P2P\nconst BLOCK_CANDIDATE = 0x03;\n\nconst SESSION_START = 0x02;\nconst CHAT_MESSAGE = 0x67;\n\n// Lightning\nconst LIGHTNING_TEST_HEADER = 'D0520C6E';\nconst LIGHTNING_PROTOCOL_H_INIT = 'Noise_XK_secp256k1_ChaChaPoly_SHA256';\nconst LIGHTNING_PROTOCOL_PROLOGUE = 'lightning';\n\n// Lightning BMM\nconst LIGHTNING_BMM_HEADER = 'D0520C6E';\nconst LIGHTNING_SIDECHAIN_NUM = 0xFF; // 1-byte - sidechain number\n\nconst LIGHTNING_SIDEBLOCK_HASH = 0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000; // 32-bytes\nconst LIGHTNING_PARENT_SIDEBLOCK_HASH = 0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001; // 32-bytes\n\nconst ZERO_LENGTH_PLAINTEXT = '';\n\nmodule.exports = {\n  PEER_PORT,\n  MAX_PEERS,\n  PRECISION,\n  BITCOIN_GENESIS,\n  BITCOIN_GENESIS_ROOT,\n  FABRIC_KEY_DERIVATION_PATH,\n  HEADER_SIZE,\n  GENERIC_MESSAGE_TYPE,\n  LOG_MESSAGE_TYPE,\n  GENERIC_LIST_TYPE,\n  LARGE_COLLECTION_SIZE,\n  BLOCK_CANDIDATE,\n  CHAT_MESSAGE,\n  ZERO_LENGTH_PLAINTEXT,\n  LIGHTNING_TEST_HEADER,\n  LIGHTNING_PROTOCOL_H_INIT,\n  LIGHTNING_PROTOCOL_PROLOGUE,\n  LIGHTNING_BMM_HEADER,\n  LIGHTNING_SIDECHAIN_NUM,\n  LIGHTNING_SIDEBLOCK_HASH,\n  LIGHTNING_PARENT_SIDEBLOCK_HASH,\n  MAGIC_BYTES,\n  MAX_FRAME_SIZE,\n  MAX_MEMORY_ALLOC,\n  MAX_MESSAGE_SIZE,\n  MAX_STACK_HEIGHT,\n  MAX_CHANNEL_VALUE,\n  MAX_CHAT_MESSAGE_LENGTH,\n  MAX_TX_PER_BLOCK,\n  MACHINE_MAX_MEMORY,\n  OP_CYCLE,\n  OP_DONE,\n  OP_0,\n  OP_36,\n  OP_CHECKSIG,\n  OP_DUP,\n  OP_EQUAL,\n  OP_SHA256,\n  OP_HASH160,\n  OP_PUSHDATA1,\n  OP_RETURN,\n  OP_EQUALVERIFY,\n  OP_SEPARATOR,\n  P2P_GENERIC,\n  P2P_IDENT_REQUEST,\n  P2P_IDENT_RESPONSE,\n  P2P_CHAIN_SYNC_REQUEST,\n  P2P_ROOT,\n  P2P_PING,\n  P2P_PONG,\n  P2P_START_CHAIN,\n  P2P_INSTRUCTION,\n  P2P_BASE_MESSAGE,\n  P2P_STATE_ROOT,\n  P2P_STATE_COMMITTMENT,\n  P2P_STATE_CHANGE,\n  P2P_STATE_REQUEST,\n  P2P_TRANSACTION,\n  P2P_CALL,\n  P2P_SESSION_ACK,\n  PEER_CANDIDATE,\n  DOCUMENT_PUBLISH_TYPE,\n  DOCUMENT_REQUEST_TYPE,\n  SESSION_START,\n  VERSION_NUMBER\n};\n","'use strict';\n\nconst {\n  P2P_CALL\n} = require('@fabric/core/constants');\n\n// Internal Dependencies\nconst http = require('http');\nconst https = require('https');\nconst querystring = require('querystring');\n\n// External Dependencies\nconst fetch = require('node-fetch');\nconst parser = require('content-type');\nconst ws = require('ws').WebSocket;\n\n// Internal Types\nconst Actor = require('@fabric/core/types/actor');\nconst Message = require('@fabric/core/types/message');\nconst CONTENT_TYPE = 'application/json';\n\n/**\n * Interact with a remote {@link Resource}.  This is currently the only\n * HTTP-related code that should remain in @fabric/core — all else must\n * be moved to @fabric/http before final release!\n * @type {Remote}\n * @property {Object} config\n * @property {Boolean} secure\n */\nclass Remote extends Actor {\n  /**\n   * An in-memory representation of a node in our network.\n   * @param       {Object} target - Target object.\n   * @param       {String} target.host - Named host, e.g. \"localhost\".\n   * @param       {String} target.secure - Require TLS session.\n   * @constructor\n   */\n  constructor (config = {}) {\n    super(config);\n\n    this.settings = Object.assign({\n      authority: 'localhost',\n      entropy: Math.random(),\n      secure: true,\n      port: 443\n    }, config);\n\n    this.host = this.settings.authority;\n    this.secure = this.settings.secure;\n    this.socket = null;\n\n    this.endpoint = `${(this.secure) ? 'wss' : 'ws'}:${this.host}:${this.port}/`;\n\n    this._state = {\n      status: 'PAUSED',\n      messages: [],\n      meta: {\n        messages: {\n          count: 0\n        }\n      }\n    };\n\n    return this;\n  }\n\n  get port () {\n    return this.settings.port;\n  }\n\n  get isArrayBufferSupported () {\n    return (new Buffer(new Uint8Array([1]).buffer)[0] === 1);\n  }\n\n  get arrayBufferToBuffer () {\n    return this.isArrayBufferSupported ? this.arrayBufferToBufferAsArgument : this.arrayBufferToBufferCycle;\n  }\n    \n  arrayBufferToBufferAsArgument (ab) {\n    return new Buffer(ab);\n  }\n\n  arrayBufferToBufferCycle (ab) {\n    var buffer = new Buffer(ab.byteLength);\n    var view = new Uint8Array(ab);\n    for (var i = 0; i < buffer.length; ++i) {\n        buffer[i] = view[i];\n    }\n    return buffer;\n  }\n\n  async _handleSocketClose (message) {\n    this._state.status = 'CLOSED';\n    console.log('[FABRIC:REMOTE]', 'Socket close:', message);\n    this.connect();\n  }\n\n  async _handleSocketError (message) {\n    console.error('[FABRIC:REMOTE]', 'Socket error:', message);\n    this.emit('error', message);\n  }\n\n  async _handleSocketMessage (packet) {\n    this.emit('debug', `[FABRIC:REMOTE] Socket packet ${JSON.stringify(packet)}`);\n    const length = packet.data.byteLength;\n    console.log('length:', length);\n    const buffer = Buffer.from(packet.data);\n    console.log('buffer:', buffer);\n    const message = Message.fromRaw(buffer).toObject();\n    console.log('message:', message);\n    this._state.messages.push(message);\n    ++this._state.meta.messages.count;\n    this.emit('message', message);\n  }\n\n  async _handleSocketOpen (message) {\n    this._state.status = 'CONNECTED';\n    this.emit('ready');\n  }\n\n  async executeMethod (name, params = []) {\n    const call = Message.fromVector([P2P_CALL, JSON.stringify([name, params])]);\n    console.log('call:', call);\n    console.log('raw:', call.toRaw());\n    return this.socket.send(call.toRaw());\n  }\n\n  async connect () {\n    this._state.status = 'CONNECTING';\n\n    try {\n      this.socket = new WebSocket(this.endpoint);\n      console.log('socket:', this.socket);\n    } catch (exception) {\n      console.error('[FABRIC:REMOTE]', 'Unable to connect:', exception);\n    }\n\n    if (this.socket) {\n      this.socket.binaryType = 'arraybuffer';\n      this.socket.addEventListener('close', this._handleSocketClose.bind(this));\n      this.socket.addEventListener('open', this._handleSocketOpen.bind(this));\n      this.socket.addEventListener('message', this._handleSocketMessage.bind(this));\n      this.socket.addEventListener('error', this._handleSocketError.bind(this));\n    }\n\n    return this;\n  }\n\n  /**\n   * Enumerate the available Resources on the remote host.\n   * @return {Configuration} An object with enumerable key/value pairs for the Application Resource Contract.\n   */\n  async enumerate () {\n    const options = await this._OPTIONS('/');\n    const results = [];\n\n    for (const name in options) {\n      const definition = options[name];\n      results.push({\n        name: definition.name,\n        description: definition.description,\n        components: Object.assign({\n          list: 'maki-resource-list',\n          view: 'maki-resource-view'\n        }, definition.components),\n        routes: definition.routes,\n        attributes: definition.attributes,\n        names: definition.names\n      });\n    }\n\n    return options;\n  }\n\n  /**\n   * Make an HTTP request to the configured authority.\n   * @param {String} type One of `GET`, `PUT`, `POST`, `DELETE`, or `OPTIONS`.\n   * @param {String} path The path to request from the authority.\n   * @param {Object} [params] Options.\n   * @returns {FabricHTTPResult}\n   */\n  async request (type, path, params = {}) {\n    const self = this;\n    const parts = self.settings.authority.split(':');\n\n    // TODO: use onion address for secure mode\n    const host = parts[0] || ((self.secure) ? 'localhost' : 'localhost');\n    let port = parts[1] || ((self.secure) ? 443 : 80);\n\n    if (this.settings.port) {\n      port = this.settings.port;\n    }\n\n    const protocol = (!self.secure) ? 'http' : 'https';\n    let url = `${protocol}://${host}:${port}${path}`;\n\n    let result = null;\n    let response = null;\n    let headers = {\n      'Accept': CONTENT_TYPE,\n      'Content-Type': CONTENT_TYPE\n    };\n\n    let opts = {\n      method: type,\n      headers: headers\n    };\n\n    // TODO: break out into independent auth module\n    if (this.settings.username || this.settings.password) {\n      headers['Authorization'] = `Basic ${Buffer.from([\n        this.settings.username || '',\n        this.settings.password || ''\n      ].join(':')).toString('base64')}`;\n    }\n\n    switch (params.mode) {\n      case 'query':\n        url += '?' + querystring.stringify(params.body);\n        break;\n      default:\n        try {\n          opts.body = JSON.stringify(params.body);\n        } catch (exception) {\n          console.error('[FABRIC:REMOTE] Could not prepare request:', exception);\n        }\n\n        opts = Object.assign(opts, {\n          body: params.body || null\n        });\n        break;\n    }\n\n    // Core Logic\n    try {\n      response = await fetch(url, opts);\n    } catch (e) {\n      self.emit('error', `[REMOTE] exception: ${e}`);\n    }\n\n    if (!response) {\n      return {\n        status: 'error',\n        message: 'No response to request.'\n      };\n    }\n\n    switch (response.status) {\n      case 404:\n        result = {\n          status: 'error',\n          message: 'Document not found.'\n        };\n        break;\n      default:\n        if (response.ok) {\n          const formatter = parser.parse(response.headers.get('content-type'));\n          switch (formatter.type) {\n            case 'application/json':\n              try {\n                result = await response.json();\n              } catch (E) {\n                console.error('[REMOTE]', 'Could not parse JSON:', E);\n              }\n              break;\n            default:\n              if (this.settings.verbosity >= 4) self.emit('warning', `[FABRIC:REMOTE] Unhandled headers content type: ${formatter.type}`);\n              result = await response.text();\n              break;\n          }\n        } else {\n          if (this.settings.verbosity >= 4) console.warn('[FABRIC:REMOTE]', 'Unmanaged HTTP status code:', response.status);\n\n          try {\n            result = response.json();\n          } catch (exception) {\n            result = response.text();\n          }\n        }\n        break;\n    }\n\n    return result;\n  }\n\n  async ping () {\n    this.send({\n      created: (new Date()).toISOString(),\n      type: 'PING'\n    });\n  }\n\n  async send (message) {\n    const msg = Message.fromVector(['GenericMessage', JSON.stringify(message)]);\n    const raw = msg.toRaw();\n\n    console.log('raw:', raw);\n    console.log('raw (string):', raw.toString('hex'));\n\n    const actor = new Actor({ content: raw.toString('hex') });\n    this.socket.send(raw);\n    return actor.id;\n  }\n\n  async sendAsJSON (message) {\n    this.socket.send({\n      content: message\n    });\n  }\n\n  /**\n   * HTTP PUT against the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} body - Map of parameters to supply.\n   * @return {FabricHTTPResult|String} Result of request.\n   */\n  async _PUT (key, body) {\n    return this.request('put', key, { body });\n  }\n\n  /**\n   * HTTP GET against the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {FabricHTTPResult|String} Result of request.\n   */\n  async _GET (key, params) {\n    return this.request('get', key, params);\n  }\n\n  /**\n   * HTTP POST against the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {FabricHTTPResult|String} Result of request.\n   */\n  async _POST (key, obj, params = {}) {\n    let result = null;\n    let options = null;\n\n    switch (params.mode) {\n      case 'query':\n        options = Object.assign({}, {\n          body: obj,\n          mode: 'query'\n        });\n        break;\n      default:\n        options = Object.assign({}, params, {\n          body: obj,\n          mode: 'body'\n        });\n        break;\n    }\n\n    result = await this.request('post', key, options);\n\n    return result;\n  }\n\n  /**\n   * HTTP OPTIONS on the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {Object} - Full description of remote resource.\n   */\n  async _OPTIONS (key, params) {\n    return this.request('options', key, params);\n  }\n\n  /**\n   * HTTP PATCH on the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} body - Map of parameters to supply.\n   * @return {Object} - Full description of remote resource.\n   */\n  async _PATCH (key, body) {\n    return this.request('patch', key, { body });\n  }\n\n  /**\n   * HTTP DELETE on the configured Authority.\n   * @param  {String} path - HTTP Path to request.\n   * @param  {Object} params - Map of parameters to supply.\n   * @return {Object} - Full description of remote resource.\n   */\n  async _DELETE (key, params) {\n    return this.request('delete', key, params);\n  }\n\n  async _SEARCH (key, params) {\n    return this.request('search', key, params);\n  }\n}\n\nmodule.exports = Remote;\n","'use strict';\n\n// TODO: evaluate why have to climb tree?\nconst playnet = require('../../node_modules/@fabric/core/settings/playnet');\n\nmodule.exports = {\n  port: 9999,\n  seed: null,\n  status: 'PAUSED',\n  balances: [\n    { asset: 'Bitcoin', symbol: 'BTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'Liquid BTC (LBTC)', symbol: 'BTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'Shyft', symbol: 'SHFT', confirmed: 0, type: 'confirmed' },\n    { asset: 'Bitcoin (testnet)', symbol: 'TBTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'Bitcoin (regtest)', symbol: 'RBTC', confirmed: 0, type: 'confirmed' },\n    { asset: 'BTC A', symbol: 'BTCA', confirmed: 0, type: 'confirmed' },\n    { asset: 'BTC B', symbol: 'BTCB', confirmed: 0, type: 'confirmed' },\n    { asset: 'Lightning BTC', symbol: 'BTC', confirmed: 0.001, type: 'outbound' },\n    { asset: 'Lightning BTC', symbol: 'BTC', confirmed: 0.001, type: 'inbound' }\n  ],\n  chains: [\n    { name: 'Fabric (playnet)', asset: 'PFAB', tip: '???' },\n    { name: 'Bitcoin (mainnet)', asset: 'BTC', tip: '???', genesis: '000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f' },\n    { name: 'Bitcoin (regtest)', asset: 'RBTC', tip: '???' },\n    { name: 'Bitcoin (testnet)', asset: 'TBTC', tip: '???' },\n    { name: 'BTC A (regtest)', asset: 'BTCA', tip: '???' },\n    { name: 'BTC B (regtest)', asset: 'BTCB', tip: '???' },\n    { name: 'Ethereum (Ropsten)', asset: 'ETHR', tip: '???' }\n  ],\n  channels: [],\n  keys: [],\n  identity: {\n    id: '',\n    seed: playnet.key.seed\n  },\n  nodes: [\n/**/'localhost:9977', // BTC   `                                              /**/\n/**/'localhost:9978', // BTCA   \\___                                          /**/\n/**/'localhost:9979', // BTCB   /    }- Together these are the first 3 chains /**/\\\n    'localhost:9980', // Liquid\n    'localhost:9981', // Shyft\n  ],\n  orders: [],\n  peers: [\n    { id: '???', alias: 'NUEVO', host: 'localhost', port: '7777', asset: 'BTC' }\n  ],\n  transactions: []\n};\n","/**\n * Create a new {@link Object} with sorted properties.\n * @param {Object} [state] Object to sort.\n * @returns {Object} Re-sorted instance of `state` as provided.\n */\nmodule.exports = function _sortKeys (state = {}) {\n  return Object.keys(state).sort().reduce((obj, key) => {\n    obj[key] = state[key];\n    return obj;\n  }, {});\n};\n","'use strict';\n\nconst {\n  MAGIC_BYTES,\n  VERSION_NUMBER,\n  HEADER_SIZE,\n  MAX_MESSAGE_SIZE,\n  OP_CYCLE,\n  GENERIC_MESSAGE_TYPE,\n  LOG_MESSAGE_TYPE,\n  GENERIC_LIST_TYPE,\n  P2P_GENERIC,\n  P2P_IDENT_REQUEST,\n  P2P_IDENT_RESPONSE,\n  P2P_ROOT,\n  P2P_PING,\n  P2P_PONG,\n  P2P_START_CHAIN,\n  P2P_INSTRUCTION,\n  P2P_BASE_MESSAGE,\n  P2P_CHAIN_SYNC_REQUEST,\n  P2P_STATE_ROOT,\n  P2P_STATE_COMMITTMENT,\n  P2P_STATE_CHANGE,\n  P2P_STATE_REQUEST,\n  P2P_TRANSACTION,\n  P2P_CALL,\n  CHAT_MESSAGE,\n  DOCUMENT_PUBLISH_TYPE,\n  DOCUMENT_REQUEST_TYPE,\n  BLOCK_CANDIDATE,\n  PEER_CANDIDATE,\n  SESSION_START\n} = require('../constants');\n\n// Dependencies\nconst crypto = require('crypto');\nconst struct = require('struct');\n\n// Fabric Types\nconst Actor = require('./actor');\nconst Label = require('./label');\n\n// Function Definitions\nconst padDigits = require('../functions/padDigits');\n\n// Type Labels\nconst TYPE_ETHEREUM_BLOCK        = parseInt((new Label('types/EthereumBlock'))._id, 16);\nconst TYPE_ETHEREUM_BLOCK_NUMBER = parseInt((new Label('types/EthereumBlockNumber'))._id, 16);\n\n/**\n * The {@link Message} type defines the Application Messaging Protocol, or AMP.\n * Each {@link Actor} in the network receives and broadcasts messages,\n * selectively disclosing new routes to peers which may have open circuits.\n * @type {Object}\n */\nclass Message extends Actor {\n  /**\n   * The `Message` type is standardized in {@link Fabric} as a {@link Array}, which can be added to any other vector to compute a resulting state.\n   * @param  {Object} message Message vector.  Will be serialized by {@link Array#_serialize}.\n   * @return {Message} Instance of the message.\n   */\n  constructor (input = {}) {\n    super(input);\n\n    this.raw = {\n      magic: Buffer.alloc(4),\n      version: Buffer.alloc(4),\n      type: Buffer.alloc(4), // TODO: 8, 32\n      size: Buffer.alloc(4), // TODO: 8, 32\n      hash: Buffer.alloc(32),\n      parent: Buffer.alloc(32),\n      data: null\n    };\n\n    this.raw.magic.write(MAGIC_BYTES.toString(16), 'hex');\n    this.raw.version.write(padDigits(VERSION_NUMBER.toString(16), 8), 'hex');\n\n    if (input.data && input.type) {\n      this.type = input.type;\n\n      if (typeof input.data !== 'string') {\n        this.data = JSON.stringify(input.data);\n      } else {\n        this.data = input.data;\n      }\n    }\n\n    // Set various properties to be unenumerable\n    for (let name of [\n      '@input',\n      '@entity',\n      '_state',\n      'config',\n      'settings',\n      'stack',\n      'observer'\n    ]) Object.defineProperty(this, name, { enumerable: false });\n\n    return this;\n  }\n\n  get body () {\n    return this.raw.data.toString('utf8');\n  }\n\n  get byte () {\n    const input = 0 + '';\n    const num = Buffer.from(`0x${padDigits(input, 8)}`, 'hex');\n    return num;\n  }\n\n  get tu16 () {\n    return parseInt(0);\n  }\n\n  get tu32 () {\n    return parseInt(0);\n  }\n\n  get tu64 () {\n    return parseInt(0);\n  }\n\n  get Uint256 () {\n    // 256 bits\n    return Buffer.from((this.raw && this.raw.hash) ? `0x${padDigits(this.raw.hash, 8)}` : crypto.randomBytes(32));\n  }\n\n  toBuffer () {\n    return this.asRaw();\n  }\n\n  /**\n   * Returns a {@link Buffer} of the complete message.\n   * @return {Buffer} Buffer of the encoded {@link Message}.\n   */\n  asRaw () {\n    return Buffer.concat([this.header, this.raw.data]);\n  }\n\n  toRaw () {\n    return this.asRaw();\n  }\n\n  asTypedArray () {\n    return new Uint8Array(this.asRaw());\n    // TODO: Node 12\n    // return new TypedArray(this.asRaw());\n  }\n\n  asBlob () {\n    return this.asRaw().map(byte => parseInt(byte, 16));\n  }\n\n  toObject () {\n    return {\n      headers: {\n        magic: parseInt(`0x${this.raw.magic.toString('hex')}`, 16),\n        version: parseInt(`${this.raw.version.toString('hex')}`, 16),\n        type: parseInt(`${this.raw.type.toString('hex')}`, 16),\n        size: parseInt(`${this.raw.size.toString('hex')}`, 16),\n        hash: this.raw.hash.toString('hex')\n      },\n      type: this.type,\n      data: this.data\n    };\n  }\n\n  fromObject (input) {\n    return new Message(input);\n  }\n\n  static parseBuffer (buffer) {\n    const message = struct()\n      .charsnt('magic', 4, 'hex')\n      .charsnt('version', 4, 'hex')\n      .charsnt('type', 4, 'hex')\n      .charsnt('size', 4, 'hex')\n      .charsnt('hash', 32, 'hex')\n      .charsnt('data', buffer.length - HEADER_SIZE);\n\n    message.allocate();\n    message._setBuff(buffer);\n\n    return message;\n  }\n\n  static fromBuffer (buffer) {\n    return Message.fromRaw(buffer);\n  }\n\n  static fromRaw (input) {\n    if (!input) return null;\n    if (!(input instanceof Buffer)) throw new Error('Input must be a buffer.');\n    // if (input.length < HEADER_SIZE) return null;\n    // if (input.length > MAX_MESSAGE_SIZE) return new Error('Input too large.');\n\n    const message = new Message();\n\n    message.raw = {\n      magic: input.slice(0, 4),\n      version: input.slice(4, 8),\n      type: input.slice(8, 12),\n      size: input.slice(12, 16),\n      hash: input.slice(16, 48)\n    };\n\n    message.data = input.slice(HEADER_SIZE);\n\n    return message;\n  }\n\n  static fromVector (vector = ['LogMessage', 'No vector provided.']) {\n    let message = null;\n\n    try {\n      message = new Message({\n        type: vector[0],\n        data: vector[1]\n      });\n    } catch (exception) {\n      console.error('[FABRIC:MESSAGE]', 'Could not construct Message:', exception);\n    }\n\n    return message;\n  }\n\n  /* get [Symbol.toStringTag] () {\n    return `<Message | ${JSON.stringify(this.raw)}>`;\n  } */\n\n  get id () {\n    return crypto.createHash('sha256').update(this.asRaw()).digest('hex');\n  }\n\n  get types () {\n    // Message Types\n    return {\n      'GenericMessage': GENERIC_MESSAGE_TYPE,\n      'GenericLogMessage': LOG_MESSAGE_TYPE,\n      'GenericList': GENERIC_LIST_TYPE,\n      'GenericQueue': GENERIC_LIST_TYPE,\n      'FabricLogMessage': LOG_MESSAGE_TYPE,\n      'FabricServiceLogMessage': LOG_MESSAGE_TYPE,\n      'GenericTransferQueue': GENERIC_LIST_TYPE,\n      // TODO: document Generic type\n      // P2P Commands\n      'Generic': P2P_GENERIC,\n      'Cycle': OP_CYCLE,\n      'IdentityRequest': P2P_IDENT_REQUEST,\n      'IdentityResponse': P2P_IDENT_RESPONSE,\n      'ChainSyncRequest': P2P_CHAIN_SYNC_REQUEST,\n      // TODO: restore this type\n      // 'StateRoot': P2P_ROOT,\n      'Ping': P2P_PING,\n      'Pong': P2P_PONG,\n      'DocumentRequest': DOCUMENT_REQUEST_TYPE,\n      'DocumentPublish': DOCUMENT_PUBLISH_TYPE,\n      'BlockCandidate': BLOCK_CANDIDATE,\n      'PeerCandidate': PEER_CANDIDATE,\n      'PeerInstruction': P2P_INSTRUCTION,\n      'PeerMessage': P2P_BASE_MESSAGE,\n      'StartSession': SESSION_START,\n      'ChatMessage': CHAT_MESSAGE,\n      'StartChain': P2P_START_CHAIN,\n      // TODO: restore above StateRoot type\n      'StateRoot': P2P_STATE_ROOT,\n      'StateCommitment': P2P_STATE_COMMITTMENT,\n      'StateChange': P2P_STATE_CHANGE,\n      'StateRequest': P2P_STATE_REQUEST,\n      'Transaction': P2P_TRANSACTION,\n      'Call': P2P_CALL,\n      'LogMessage': LOG_MESSAGE_TYPE,\n      'EthereumBlock': TYPE_ETHEREUM_BLOCK,\n      'EthereumBlockNumber': TYPE_ETHEREUM_BLOCK_NUMBER\n    };\n  }\n\n  get codes () {\n    return Object.entries(this.types).reduce((ret, entry) => {\n      const [ key, value ] = entry;\n      ret[ value ] = key;\n      return ret;\n    }, {});\n  }\n\n  get magic () {\n    return this.raw.magic;\n  }\n\n  get size () {\n    return parseInt(Buffer.from(this.raw.size, 'hex'));\n  }\n\n  get version () {\n    return parseInt(Buffer.from(this.raw.version));\n  }\n\n  get header () {\n    const parts = [\n      Buffer.from(this.raw.magic, 'hex'),\n      Buffer.from(this.raw.version, 'hex'),\n      Buffer.from(this.raw.type, 'hex'),\n      Buffer.from(this.raw.size, 'hex'),\n      Buffer.from(this.raw.hash, 'hex')\n    ];\n\n    return Buffer.concat(parts);\n  }\n}\n\nObject.defineProperty(Message.prototype, 'type', {\n  get () {\n    const code = parseInt(this.raw.type.toString('hex'), 16);\n    switch (code) {\n      case GENERIC_MESSAGE_TYPE:\n        return 'GenericMessage';\n      case LOG_MESSAGE_TYPE:\n        return 'GenericLogMessage';\n      case GENERIC_LIST_TYPE:\n        return 'GenericList';\n      case DOCUMENT_PUBLISH_TYPE:\n        return 'DocumentPublish';\n      case DOCUMENT_REQUEST_TYPE:\n        return 'DocumentRequest';\n      case BLOCK_CANDIDATE:\n        return 'BlockCandidate';\n      case OP_CYCLE:\n        return 'Cycle';\n      case P2P_PING:\n        return 'Ping';\n      case P2P_PONG:\n        return 'Pong';\n      case P2P_GENERIC:\n        return 'Generic';\n      case P2P_CHAIN_SYNC_REQUEST:\n        return 'ChainSyncRequest';\n      case P2P_IDENT_REQUEST:\n        return 'IdentityRequest';\n      case P2P_IDENT_RESPONSE:\n        return 'IdentityResponse';\n      case P2P_BASE_MESSAGE:\n        return 'PeerMessage';\n      case P2P_STATE_ROOT:\n        return 'StateRoot';\n      case P2P_STATE_CHANGE:\n        return 'StateChange';\n      case P2P_STATE_REQUEST:\n        return 'StateRequest';\n      case P2P_TRANSACTION:\n        return 'Transaction';\n      case P2P_CALL:\n        return 'Call';\n      case PEER_CANDIDATE:\n        return 'PeerCandidate';\n      case SESSION_START:\n        return 'StartSession';\n      case CHAT_MESSAGE:\n        return 'ChatMessage';\n      case P2P_START_CHAIN:\n        return 'StartChain';\n      case TYPE_ETHEREUM_BLOCK:\n        return 'EthereumBlock';\n      case TYPE_ETHEREUM_BLOCK_NUMBER:\n        return 'EthereumBlockNumber';\n      default:\n        return 'GenericMessage';\n    }\n  },\n  set (value) {\n    let code = this.types[value];\n    // Default to GenericMessage;\n    if (!code) {\n      this.emit('warning', `Unknown message type: ${value}`);\n      code = this.types['GenericMessage'];\n    }\n\n    const padded = padDigits(code.toString(16), 8);\n    this['@type'] = value;\n    this.raw.type.write(padded, 'hex');\n  }\n});\n\nObject.defineProperty(Message.prototype, 'data', {\n  get () {\n    if (!this.raw.data) return '';\n    return this.raw.data.toString('utf8');\n  },\n  set (value) {\n    if (!value) value = '';\n    const hash = crypto.createHash('sha256').update(value.toString('utf8'));\n    this.raw.hash = hash.digest();\n    this.raw.data = Buffer.from(value);\n    this.raw.size.write(padDigits(this.raw.data.byteLength.toString(16), 8), 'hex');\n  }\n});\n\nmodule.exports = Message;\n","'use strict';\n\nconst Actor = require('./actor');\nconst Hash256 = require('./hash256');\n\nclass Label extends Actor {\n  constructor (input = '') {\n    super(input);\n    if (typeof input != 'string') input = super.serialize(input);\n    this._id = Hash256.digest(`@labels/${input}`);\n    return this;\n  }\n}\n\nmodule.exports = Label;\n","'use strict';\n\nmodule.exports = function padDigits (number, digits) {\n  return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","// Defaults\nimport * as state from '../settings/state';\n\n// Dependencies\nimport * as EC from '../../node_modules/elliptic/lib/elliptic/ec';\nimport merge from 'lodash.merge';\nimport React, { Component } from 'react';\n// import { connect } from 'react-redux';\n// import * as d3 from 'd3';\n// import * as D3GraphViz from 'd3-graphviz';\n// import { Graphviz } from 'graphviz-react';\n\n// Components\n// import FabricStateMapper from '../StateMapper';\nimport * as Actor from '@fabric/core/types/actor';\nimport { Card } from 'semantic-ui-react';\n\nclass FabricComponent extends Component {\n  constructor (props) {\n    super(props);\n\n    if (props.import) {\n      this.state = merge({\n        integrity: null,\n        status: 'PAUSED'\n      }, state, props);\n    }\n\n    // Fabric Actor\n    this.actor = new Actor(this.state);\n    this.ec = new EC('secp256k1');\n\n    // React Element\n    this.ref = React.createRef();\n\n    return this;\n  }\n\n  get genesis () {\n    return (this.actor) ? this.actor.id : '00000000000000000000000000000000';\n  }\n\n  get dochash () {\n    return (this.actor) ? this.actor.id : '00000000000000000000000000000000';\n  }\n\n  get link () {\n    return `fabric:${this.dochash}`;\n  }\n\n  get integrity () {\n    return 'sha256-deadbeefbabe';\n  }\n\n  componentDidMount () {\n    this.start();\n    console.log('[FABRIC:COMPONENT]', 'Mounted:', this);\n  }\n\n  componentWillReceiveProps (props) {\n    this.setState({\n      hash: props.hash\n    });\n  }\n\n  render () {\n    const dot = 'graph{a--b}';;\n    return (\n      <>\n        <fabric-component ref={this.ref}>\n          <Card>\n            <Card.Content>\n              <fabric-graph>\n                <svg id='graph' />\n                {/* <Graphviz dot={dot} /> */}\n              </fabric-graph>\n            </Card.Content>\n            <Card.Content>{this.props.children}</Card.Content>\n          </Card>\n        </fabric-component>\n      </>\n    );\n  }\n\n  start () {\n    const actor = new Actor(this.state);\n    console.log('actor:', actor);\n    console.log('actor ID:', actor.id.constructor.name, actor.id);\n    this.setState({ hash: actor.id });\n\n    // this.setState({ status: 'STARTED' });\n    // d3.select('#graph').graphviz().renderDot('digraph {a -> b}');\n\n    return this;\n  }\n}\n\nexport default FabricComponent;\n\n// TODO: debug why this can't be used on this parent class...\n// ```\n// TypeError: Class extends value #<Object> is not a constructor or null\n// Module.<anonymous>\n// src/components/FabricIdentityManager.js:19\n//   16 | import IdentityPicker from './IdentityPicker';\n//   17 | import SeedEntryForm from './SeedEntryForm';\n//   18 | \n// > 19 | class FabricIdentityManager extends FabricComponent {\n//   20 |   constructor (props) {\n//   21 |     super(props);\n//   22 | \n// ```\n// export default connect(FabricStateMapper)(FabricComponent);\n//\n// ...\n// End of @fabric/core/types/component\n","// State\nimport * as defaults from '../settings/state';\n\n// Dependencies\nimport merge from 'lodash.merge';\nimport FabricComponent from '../types/component';\n\n// Components\nimport {\n  Button,\n  Card,\n  Feed,\n  Icon,\n  Label\n} from 'semantic-ui-react';\n\n// Fabric Types\n// import * as Store from '@fabric/core/types/store';\n// import * as Worker from '@fabric/core/types/worker';\nimport * as Remote from '@fabric/http/types/remote';\n\nclass FabricBridge extends FabricComponent {\n  constructor (props) {\n    super(props);\n\n    this.settings = Object.assign({\n      host: 'localhost',\n      port: 9999\n    }, props);\n\n    this.state = merge({\n      integrity: 'sha256-deadbeefbabe',\n      status: 'disconnected',\n      messages: [],\n      meta: {\n        messages: {\n          count: 0\n        }\n      }\n    }, defaults, props);\n\n    console.log('bridge settings:', this.settings);\n\n    this.remote = new Remote({\n      host: 'nuevo' || this.settings.host,\n      port: this.settings.port,\n      secure: false\n    });\n\n    /* this.agent = new Worker({\n      service: main,\n      settings: settings\n    }); */\n\n    return this;\n  }\n\n  _handleRemoteMessage (message) {\n    console.log('Remote message:', message);\n    this._syncState();\n  }\n\n  _handleRemoteError (error) {\n    console.log('Remote error:', error);\n  }\n\n  _syncState () {\n    this.setState({\n      status: this.remote._state.status,\n      messages: this.remote._state.messages,\n      meta: this.remote._state.meta\n    });\n  }\n\n  componentDidMount () {\n    console.log('bridge mounted! starting...');\n    // this.agent.executeMethod('connect');\n    // this.process.executeMethod('connect');\n    this.start();\n  }\n\n  connect () {\n    this._syncState();\n    this.remote.connect();\n    this._syncState();\n  }\n\n  executeMethod (name, params) {\n    return this.remote.executeMethod(name, params);\n  }\n\n  ping () {\n    this.remote.ping();\n  }\n\n  render () {\n    return (\n      <>\n        <Card fluid>\n          <Card.Content>\n            <Button.Group floated='right'>\n              <Button onClick={this.ping.bind(this)}>Ping <Icon name='info' /></Button>\n              <Button onClick={this.connect.bind(this)}>Connect <Icon name='lightning' /></Button>\n            </Button.Group>\n            <Card.Header as='h3'>Bridge</Card.Header>\n          </Card.Content>\n          <Card.Content>\n            <Feed>\n              {this.state.messages.map((message, i) => {\n                return (\n                  <Feed.Event size='small' key={i} style={{ fontSize: '0.8em', fontFamily: 'monospace' }}>\n                    <Feed.Content>\n                      <div style={{color: 'black'}}>{JSON.stringify(message, null, '  ')}</div>\n                    </Feed.Content>\n                  </Feed.Event>\n                );\n              })}\n            </Feed>\n          </Card.Content>\n          <Card.Content extra>\n            <Label><Icon name='info' /> {this.remote._state.status}</Label>\n            <Label><Icon name='mail' /> {this.remote._state.meta.messages.count}</Label>\n          </Card.Content>\n        </Card>\n      </>\n    );\n  }\n\n  async _handleRemoteReady () {\n    this._syncState();\n    console.log('Remote ready!');\n    const balances = await this.executeMethod('btc_getbalances');\n    console.log('balances:', balances);\n  }\n\n  async send (message) {\n    return this.remote.send(message);\n  }\n\n  async start () {\n    this.remote.on('ready', this._handleRemoteReady.bind(this));\n    this.remote.on('message', this._handleRemoteMessage.bind(this));\n    this.remote.on('error', this._handleRemoteError.bind(this));\n    this.connect();\n  }\n}\n\nexport default FabricBridge;\n","import FabricComponent from '../types/component';\n\n// Components\nimport {\n  Button,\n  // Card,\n  // Container,\n  Icon,\n  // Grid,\n  Header,\n  // Label,\n  // Menu,\n  // Segment,\n  Table,\n  Card\n} from 'semantic-ui-react';\n\nclass TransactionList extends FabricComponent {\n  constructor (props) {\n    super(props);\n    this.state = {\n      transactions: [],\n      integrity: 'sha256-deadbeefbabe'\n    };\n  }\n\n  _addKey (key) {\n    // TODO: merge proper\n    this.setState({ keys: this.state.keys.concat(key) });\n  }\n\n  render () {\n    return (\n      <>\n        <div className='ui vertical stripe segment'>\n          <div className='ui stackable grid container'>\n            <div className='row'>\n              <div className='column'>\n                <Card fluid>\n                  <Card.Content>\n                    <Header><h1><Icon name='tasks' /> Transactions</h1></Header>\n                    <Table celled>\n                      <Table.Header>\n                        <Table.Row>\n                          <Table.HeaderCell>ID</Table.HeaderCell>\n                          <Table.HeaderCell>Version</Table.HeaderCell>\n                          <Table.HeaderCell>Inputs</Table.HeaderCell>\n                          <Table.HeaderCell>Outputs</Table.HeaderCell>\n                          <Table.HeaderCell>Signature</Table.HeaderCell>\n                        </Table.Row>\n                      </Table.Header>\n                      <Table.Body>\n                        {this.state.transactions.map((transaction, index) => {\n                          return (\n                            <Table.Row key={index}>\n                              <Table.Cell>{transaction.id}</Table.Cell>\n                              <Table.Cell>{transaction.version}</Table.Cell>\n                              <Table.Cell>{transaction.inputs}</Table.Cell>\n                              <Table.Cell>{transaction.outputs}</Table.Cell>\n                              <Table.Cell>{transaction.signature}</Table.Cell>\n                            </Table.Row>\n                          );\n                        })}\n                      </Table.Body>\n                      {/* <Table.Footer>\n                        <Table.Row>\n                          <Table.HeaderCell colSpan='3'>\n                            <Menu floated='right' pagination>\n                              <Menu.Item as='a' icon>\n                                <Icon name='chevron left' />\n                              </Menu.Item>\n                              <Menu.Item as='a'>1</Menu.Item>\n                              <Menu.Item as='a'>2</Menu.Item>\n                              <Menu.Item as='a'>3</Menu.Item>\n                              <Menu.Item as='a'>4</Menu.Item>\n                              <Menu.Item as='a' icon>\n                                <Icon name='chevron right' />\n                              </Menu.Item>\n                            </Menu>\n                          </Table.HeaderCell>\n                        </Table.Row>\n                      </Table.Footer> */}\n                    </Table>\n                  </Card.Content>\n                </Card>\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default TransactionList;\n","// Cryptography\nimport { createHash } from 'crypto';\n\n// Dependencies\nimport * as bitcoin from 'bitcoinjs-lib';\n\n// React\nimport merge from 'lodash.merge';\nimport React from 'react';\n// import { connect } from 'react-redux';\n// import FabricStateMapper from '../StateMapper';\n\n// Fabric Types\nimport FabricComponent from '../types/component';\n\n// Fabric Services\n// import Bitcoin from '@fabric/core/services/bitcoin';\n\n// Components\nimport {\n  Button,\n  // Container,\n  Dropdown,\n  Form,\n  // Grid,\n  Icon,\n  Input\n  // Menu,\n  // Segment\n} from 'semantic-ui-react';\n\n// Internals\n// import FabricKeyPair from './FabricKeyPair';\n\n// Fabric Types\nimport * as Actor from '@fabric/core/types/actor';\n// import * as Key from '@fabric/core/types/key';\n// import * as Signer from '@fabric/core/types/signer';\n\nclass FaucetDripForm extends FabricComponent {\n  constructor (props) {\n    super(props);\n\n    this.settings = merge({\n      network: 'regtest'\n    }, props);\n\n    /* this.wallet = new Wallet({\n      network: this.settings.network\n    }); */\n\n    // this.key = new Key(this.settings);\n    // this._key = new bcoin.hd.key();\n\n    // TODO: prepare Fabric\n    // i.e., use _state here, then import from getter and apply properties\n    // _from_ @react\n    this.state = merge({\n      content: {\n        requests: []\n      },\n      fields: {\n        address: ''\n      },\n      requests: {},\n      secret: Actor.randomBytes(32) // solution hash (revealed on trade)\n    }, props);\n\n    // this.bitcoin = new Bitcoin(this.settings);\n    this.form = React.createRef();\n\n    return this;\n  }\n\n  get networks () {\n    return {\n      'mainnet': bitcoin.networks.mainnet,\n      'regtest': bitcoin.networks.regtest,\n      'testnet': bitcoin.networks.testnet\n    };\n  }\n\n  _handleAddressChange (e) {\n    this.setState({\n      fields: {\n        address: e.target.value\n      }\n    });\n\n    console.log('state:', this.state);\n    console.log('value:', e.target.value);\n    console.log('network:', this.networks.regtest);\n    const isValid = this.validateAddress(e.target.value);\n    console.log('isValid:', isValid);\n\n    if (isValid) {\n\n    } else {\n      this.setState({\n        status: 'ERROR',\n        errors: [\n          'Invalid Bitcoin address.'\n        ]\n      });\n    }\n  }\n\n  _handleSecretChange (e) {\n    this.setState({ secret: e.target.value });\n  }\n\n  _handleSubmitButtonClick (e) {\n    console.log('submit button click:', e);\n  }\n\n  handleChange (e) {\n    const fields = { ...this.state.fields, [e.target.name]: e.target.value };\n    // TODO: merge old state\n    this.setState({ fields: fields });\n  }\n\n  handleSubmit (e) {\n    console.log('submitting:', e);\n    const { name, email } = this.state;\n    this.setState({ submittedName: name, submittedEmail: email });\n  }\n\n  regenerate () {\n    this.setState({ secret: Actor.randomBytes(32) });\n    this.sync();\n  }\n\n  render () {\n    return (\n      <>\n        <Form ref={this.form} onSubmit={this.props.onSubmit.bind(this)} onChange={this.handleChange.bind(this)}>\n          <Form.Field>\n            <label>Request a deposit to...</label>\n            <div className='ui input'>\n              <Input action type='text' placeholder='Enter a Bitcoin address here' value={this.state.address} onKeyUp={this._handleAddressChange.bind(this)} />\n              <Button attached type='submit' color='green' content='Request' icon='right chevron' labelPosition='right' onClick={this.props.onSubmit.bind(this)} />\n            </div>\n          </Form.Field>\n        </Form>\n      </>\n    );\n  }\n\n  start () {\n    console.log('[FAUCET:DRIPS]', 'Starting component...');\n    super.start();\n    this.sync();\n    return this;\n  }\n\n  sync () {\n    const preimage = createHash('sha256').update(this.state.secret).digest('hex');\n    this.setState({ preimage: preimage });\n    return this;\n  }\n\n  validateAddress (address) {\n    try {\n      bitcoin.address.toOutputScript(address, this.networks[this.settings.network]);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n}\n\n// export default PortalOrderForm;\nexport default FaucetDripForm;\n","// Dependencies\nimport React from 'react';\nimport {\n  Link\n} from 'react-router-dom';\n\n// Components\nimport {\n  Card,\n  Container,\n  Divider,\n  Icon,\n  // Grid,\n  // Menu,\n  Segment,\n  Visibility\n} from 'semantic-ui-react';\n\nimport FabricComponent from './types/component';\n\nimport FabricBridge from './components/FabricBridge';\n// import FabricDebugger from './components/FabricDebugger';\n\nimport FaucetDripForm from './components/FaucetDripForm';\n// import FabricIdentityManager from './components/FabricIdentityManager';\n// import PortalMenu from './components/PortalMenu';\n\nclass Home extends FabricComponent {\n  constructor (props) {\n    super(props);\n\n    // TODO: prepare Fabric\n    // i.e., use _state here, then import from getter and apply properties\n    // _from_ @react\n    this.state = {\n      integrity: 'sha256-deadbeefbabe'\n    };\n\n    this.bridge = React.createRef();\n    this.form = React.createRef();\n\n    return;\n  }\n\n  onSubmit (e) {\n    console.log('submitting:', e);\n    console.log('address from ref:', this.form.current.state);\n\n    const message = {\n      type: 'Call',\n      data: {\n        method: 'DripRequest',\n        params: [ this.form.current.state.fields.address ]\n      }\n    };\n\n    this.bridge.current.send(message).then((result) => {\n      console.log('result:', result);\n    });\n  }\n\n  render () {\n    return (\n      <>\n        <fabric-bridge-home ref={this.ref}>\n          <Visibility onBottomPassed={this._handleMastheadBottomPassed.bind(this)}>\n            <Segment className='ui inverted vertical masthead center aligned segment'>\n              <Container className='ui text container'>\n                <h1 className='ui inverted header'><Icon name='tint' /> bitfaucet</h1>\n                <h2>The official <code>@fabric/playnet</code> faucet.</h2>\n                <Container className='left aligned' style={{ marginTop: '5em' }}>\n                  <Card fluid>\n                    <Card.Content>\n                      <FaucetDripForm ref={this.form} onSubmit={this.onSubmit.bind(this)} />\n                    </Card.Content>\n                  </Card>\n                  <Card fluid>\n                    <Card.Content>\n                      <FabricBridge ref={this.bridge} onChange={this._handleBridgeChange.bind(this)} state={this.state} />\n                    </Card.Content>\n                  </Card>\n                </Container>\n              </Container>\n            </Segment>\n          </Visibility>\n        </fabric-bridge-home>\n      </>\n    );\n  }\n\n  _handleBridgeChange (event) {\n    console.log('bridge change:', event);\n  }\n\n  _handleMastheadBottomPassed (e, { calculations }) {\n    console.log('vis change:', e, calculations);\n    this.setState({ calculations });\n  }\n}\n\nexport default Home;\n","// Dependencies\nimport * as state from './settings/state';\nimport * as merge from 'lodash.merge';\n\n// React\nimport React from 'react';\n// import { Provider } from 'react-redux';\n// import { createStore } from 'redux';\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Routes\n} from 'react-router-dom';\n// import * as Fabric from '@fabric/core';\n\n// Stylesheets\nimport './App.css';\nimport './semantic.css';\nimport './index.css';\n\n// Components\n/* import {\n  Container,\n  Divider,\n  Grid,\n  Icon,\n  Menu,\n  Segment,\n  Sidebar,\n  // Visibility\n} from 'semantic-ui-react'; */\n\n// Fabric Types\nimport Actor from '@fabric/core/types/actor';\nimport FabricComponent from './types/component';\n\n// Fabric Components\nimport FabricBridge from './components/FabricBridge';\nimport FabricDebugger from './components/FabricDebugger';\n// import FabricIdentityManager from './components/FabricIdentityManager';\n// import FabricNodeList from './components/FabricNodeList';\nimport FabricTransactionList from './components/FabricTransactionList';\n\n// Portal\nimport Home from './Home';\n\n/**\n * The Portal web application.\n */\nclass App extends FabricComponent {\n  constructor (settings) {\n    super(settings);\n\n    this.settings = merge({}, state, settings);\n\n    // this.fabric = new Fabric();\n    this.state = merge({\n      actor: null,\n      integrity: null,\n      snapshots: []\n    }, state, settings);\n\n    return this;\n  }\n\n  _handleBridgeChange (event) {\n    console.log('bridge change:', event);\n  }\n\n  componentDidMount () {\n    const proof = new Actor(this.state);\n    return this;\n  }\n\n  render () {\n    return (\n      <react-application id='root'>\n        <Router>\n          <div className='pusher'>\n            <Routes>\n              <Route path='/' exact element={<Home state={this.state} balances={this.state.balances} keys={this.state.keys} />} />\n              <Route path='/transactions' element={<FabricTransactionList state={this.state} balances={this.state.balances} keys={this.state.keys} />} />\n            </Routes>\n            {/*\n            <Segment className='ui inverted vertical footer segment'>\n              <Container className='ui container'>\n                <FabricDebugger />\n                <Divider />\n                <FabricBridge onChange={this._handleBridgeChange.bind(this)} port={this.settings.port} />\n              </Container>\n            </Segment>\n            */}\n          </div>\n        </Router>\n      </react-application>\n    );\n  }\n}\n\nexport default App;\n","/**\n * Copyright: 2019, Fabric Labs\n */\n\n// React\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// Redux\n// import { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\n// import createSagaMiddleware from 'redux-saga';\n\n// Assets\nimport * as state from './settings/state';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\n// Components\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\n// Functions\n// import sendToAnalytics from './functions/sendToAnalytics';\n\n// State\nimport * as initialState from './settings/state';\n\nfunction reducer (state = initialState, action = { type: 'UNDEFINED_ACTION' }) {\n  switch (action.type) {\n    case 'SEED_ADDED':\n      return {\n        seed: state.seed\n      };\n    case 'RESET':\n      return {\n        status: 'RESET'\n      };\n    default:\n      return state;\n  }\n}\n\n// const sagas = createSagaMiddleware();\n// const store = createStore(reducer, applyMiddleware(sagas));\n\n// sagas.run(RPCRequest);\n\nReactDOM.render(\n  <React.StrictMode>\n    {/* <Provider store={store}> */}\n    {/* <Provider> */}\n      <App state={state} />\n    {/* </Provider> */}\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// TODO: enable Service Worker by disabling the line below, then test Fabric's\n// cache and the `@fabric/core/types/store` class — latest should be completely\n// isomorphic, so we're almost fully able to run in the browser now!\nserviceWorker.unregister();\n\n// reportWebVitals(sendToAnalytics);\n","'use strict';\n\n// Dependencies\nconst crypto = require('crypto');\nconst { EventEmitter } = require('events');\nconst monitor = require('fast-json-patch');\n\n// Fabric Types\nconst Hash256 = require('./hash256');\n\n// Fabric Functions\nconst _sortKeys = require('../functions/_sortKeys');\n\n/**\n * Generic Fabric Actor.\n * @access protected\n * @emits message Fabric {@link Message} objects.\n * @property {String} id Unique identifier for this Actor (id === SHA256(preimage)).\n * @property {String} preimage Input hash for the `id` property (preimage === SHA256(ActorState)).\n */\nclass Actor extends EventEmitter {\n  /**\n   * Creates an {@link Actor}, which emits messages for other\n   * Actors to subscribe to.  You can supply certain parameters\n   * for the actor, including key material [!!!] — be mindful of\n   * what you share with others!\n   * @param {Object} [actor] Object to use as the actor.\n   * @param {String} [actor.seed] BIP24 Mnemonic to use as a seed phrase.\n   * @param {Buffer} [actor.public] Public key.\n   * @param {Buffer} [actor.private] Private key.\n   * @returns {Actor} Instance of the Actor.  Call {@link Actor#sign} to emit a {@link Signature}.\n   */\n  constructor (actor = {}) {\n    super(actor);\n\n    this.log = [];\n    this.signature = null;\n    this.value = this._readObject(actor); // TODO: use Buffer?\n\n    // Internal State\n    this._state = {\n      '@type': 'Actor',\n      '@data': this.value,\n      status: 'PAUSED',\n      content: this.value || {}\n    };\n\n    // Chainable\n    return this;\n  }\n\n  static fromAny (input = {}) {\n    let state = null;\n\n    if (typeof input === 'string') {\n      state = { content: input };\n    } else if (input instanceof Buffer) {\n      state = { content: input.toString('hex') };\n    } else {\n      state = Object.assign({}, input);\n    }\n\n    return new Actor(state);\n  }\n\n  static fromJSON (input) {\n    let result = null;\n\n    if (typeof input === 'string' && input.length) {\n      console.log('trying to parse as JSON:', input);\n      try {\n        result = JSON.parse(input);\n      } catch (E) {\n        console.error('Failure in fromJSON:', E);\n      }\n    } else {\n      console.trace('Invalid input:', typeof input);\n    }\n\n    return result;\n  }\n\n  static randomBytes (count = 32) {\n    return crypto.randomBytes(count);\n  }\n\n  get id () {\n    const buffer = Buffer.from(this.preimage, 'hex');\n    return Hash256.digest(buffer);\n  }\n\n  get preimage () {\n    const input = {\n      '@type': 'FabricActorState',\n      '@data': this.toObject()\n    };\n\n    const string = JSON.stringify(input, null, '  ');\n    const buffer = Buffer.from(string, 'utf8');\n\n    return Hash256.digest(buffer);\n  }\n\n  get state () {\n    return this._state.content;\n  }\n\n  get type () {\n    return this._state['@type'];\n  }\n\n  /**\n   * Resolve the current state to a commitment.\n   * @emits Actor Current malleable state.\n   * @returns {String} 32-byte ID\n   */\n  commit () {\n    const state = new Actor(this._state.content);\n    this.log.push(...state.id);\n    this.emit('commit', state);\n    return state.id;\n  }\n\n  debug (...params) {\n    this.emit('debug', params);\n  }\n\n  /**\n   * Casts the Actor to a normalized Buffer.\n   * @returns {Buffer}\n   */\n  toBuffer () {\n    return Buffer.from(this.serialize(), 'utf8');\n  }\n\n  /**\n   * Returns the Actor's current state as an {@link Object}.\n   * @returns {Object}\n   */\n  toObject () {\n    return _sortKeys(this.state);\n  }\n\n  toString (format = 'json') {\n    switch (format) {\n      case 'hex':\n        return Buffer.from(this.serialize(), 'utf8').toString('hex');\n      case 'json':\n      default:\n        return this.serialize();\n    }\n  }\n\n  pause () {\n    this.status = 'PAUSING';\n    this.commit();\n    return this;\n  }\n\n  /**\n   * Serialize the Actor's current state into a JSON-formatted string.\n   * @returns {String}\n   */\n  serialize () {\n    let json = null;\n\n    try {\n      json = JSON.stringify(this.toObject(), null, '  ');\n    } catch (exception) {\n      json = JSON.stringify({\n        type: 'Error',\n        content: `Exception serializing: ${exception}`\n      }, null, '  ');\n    }\n\n    return json;\n  }\n\n  /**\n   * Signs the Actor.\n   * @returns {Actor}\n   */\n  sign () {\n    throw new Error('Unimplemented on this branch.  Use @fabric/core/types/signer instead.');\n    /* this.signature = this.key._sign(this.toBuffer());\n    this.emit('signature', this.signature);\n    return this; */\n  }\n\n  /**\n   * Toggles `status` property to unpaused.\n   * @\n   * @returns {Actor}\n   */\n  unpause () {\n    this.status = 'UNPAUSING';\n    this.commit();\n    this.status = 'UNPAUSED';\n    return this;\n  }\n\n  /**\n   * Incurs 1 SYSCALL\n   * @access private\n   * @returns {Object}\n   */\n  _getState () {\n    return this.state;\n  }\n\n  _readObject (input = {}) {\n    let state = {};\n\n    if (typeof input === 'string') {\n      state = Object.assign(state, {\n        type: 'String',\n        content: input\n      });\n    } else if (input instanceof Buffer) {\n      state = Object.assign(state, {\n        type: 'Buffer',\n        content: input.toString('hex'),\n        encoding: 'hex'\n      });\n    } else {\n      state = Object.assign(state, input);\n    }\n\n    return state;\n  }\n}\n\nmodule.exports = Actor;\n"],"sourceRoot":""}